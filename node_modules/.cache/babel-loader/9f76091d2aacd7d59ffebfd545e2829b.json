{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createElement}from'react';import Rater from'react-rater';import'react-rater/lib/react-rater.css';import Modal from\"react-bootstrap/Modal\";// default\nimport Header from'../components/Header';import Footer from'../components/Footer';import{fetchClient}from'../services/client-api';import{fetchCart,fetchPaymentTerms,postSelectedPaymentTerm,postEndCart,postSurveyRate}from'../services/cart-api';import{fetchDeliveryDate}from'../services/invoices-api';import{formatMoney,disconnect,formatDateToView,scrollToTop,setItemSession,getItemSession}from'../utils';import*as CartActions from'../store/actions/cart';import{connect}from'react-redux';import{Loader}from'../components/Loader/Loader';var Swal=require('sweetalert2');var Checkout=function Checkout(_ref){var refreshCartFn=_ref.refreshCartFn;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),client=_useState2[0],setClient=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),invoice=_useState4[0],setInvoice=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),paymentTerms=_useState8[0],setPaymentTerms=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),lastPaymentTerm=_useState10[0],setLastPaymentTerm=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),confirmScreen=_useState12[0],setConfirmScreen=_useState12[1];var _useState13=useState({idCondicaoPagamento:''}),_useState14=_slicedToArray(_useState13,2),inputs=_useState14[0],setInputs=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),deliveryDate=_useState16[0],setDeliveryDate=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),errors=_useState18[0],setErrors=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),ratingOldInvoice=_useState20[0],setRatingOldInvoice=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),rating=_useState22[0],setRating=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),ratingObs=_useState24[0],setRatingObs=_useState24[1];// modal\nvar _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isOpen=_useState26[0],setIsOpen=_useState26[1];var showModal=function showModal(){setIsOpen(true);};var hideModal=function hideModal(){setIsOpen(false);};// modal\nvar getDados=getItemSession('_dados');var dados=JSON.parse(getDados);var pedido=getItemSession('_pedido');useEffect(function(){fetchClient(dados.idCliente).then(function(result){setClient(result.data.Data.Dados[0]);});},[]);useEffect(function(){fetchCart(pedido).then(function(result){setInvoice(result.data.Data.Dados[0]);if(result.data.Data.Dados[0].NumeroItens===0){window.location.href=process.env.REACT_APP_BASE_URL;}if(result.data.Data.Dados[0].idCondicaoPagamento>0){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},'idCondicaoPagamento',result.data.Data.Dados[0].idCondicaoPagamento)));}setRatingOldInvoice(pedido);}).catch(function(reject){disconnect();});},[]);useEffect(function(){fetchPaymentTerms().then(function(result){setPaymentTerms(result.data.Data.Dados);var last=result.data.Data.Dados.filter(function(paymentTerm){return paymentTerm.UltimaUtilizada===true;});setLastPaymentTerm(last[0]);});},[]);useEffect(function(){fetchDeliveryDate().then(function(result){setDeliveryDate(result.data.Data.Dados[0]);});/* Deixado somente 1 disconnect */ // .catch(reject => {\n//     disconnect();\n// })\n},[]);var handlePaymentTerm=function handlePaymentTerm(e){e.preventDefault();scrollToTop();setLoading(true);postEndCart().then(function(resultEndCart){if(resultEndCart.data.Codigo===400&&resultEndCart.data.CodigoInterno===18){setErrors(resultEndCart.data.Data.Resultados);setLoading(false);}else{setItemSession('_pedido',resultEndCart.data.Data.Pedido.ukPedido);var newStorage={\"QuantidadeRegistrosTotal\":0,\"QuantidadeRegistrosRetornados\":0,\"Paginas\":1,\"ResultadosPorPagina\":0,\"Dados\":[]};setItemSession('_carrinho',JSON.stringify(newStorage));refreshCartFn(newStorage);setLoading(false);setConfirmScreen(true);if(invoice.RealizarPesquisaSatisfacao){showModal();}}}).catch(function(reject){disconnect();});};var onInputChange=function onInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},name,value)));postSelectedPaymentTerm(value);};var handleRate=function handleRate(_ref2){var rating=_ref2.rating;setRating(rating);};var onTextareaRateChange=function onTextareaRateChange(event){setRatingObs(event.target.value);};var handleSubmitRate=function handleSubmitRate(e){e.preventDefault();postSurveyRate(ratingOldInvoice,rating,ratingObs).then(function(result){hideModal();}).catch(function(reject){disconnect();});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"section\",{className:\"container checkout\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2\"},\"Fechamento do Pedido\"),/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--container\"},!isLoading?!confirmScreen&&/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--wrapper\"},errors.length>0&&/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-danger\",role:\"alert\"},/*#__PURE__*/React.createElement(\"h4\",{class:\"alert-heading\"},\"Aten\\xE7\\xE3o, seu pedido n\\xE3o foi gerado!\"),/*#__PURE__*/React.createElement(\"p\",null,\"Verifique o(s) erro(s) listado(s) abaixo:\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"ul\",null,errors.map(function(error){return/*#__PURE__*/React.createElement(\"li\",{class:\"mb-0\"},error.Mensagem);})),createElement('a',{href:'/carrinho',className:'link-texto'},'Voltar para o carrinho')),/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--campo\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"titulo h4\"},\"Faturamento\"),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto\"},\"Faturar para \",client.RazaoSocial)),/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--campo\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"titulo h4\"},\"Entrega\"),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto\"},\"Endere\\xE7o de Entrega\"),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto mt-0 checkout--max_width\"},client.EnderecoCompleto),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto titulo--bold\"},\"Data de entrega prevista: \",' ',!deliveryDate.DataEntrega?'Em definição':formatDateToView(deliveryDate.DataEntrega))),/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--campo\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"titulo h4\"},\"Pagamento\"),/*#__PURE__*/React.createElement(\"form\",{action:\"\"},/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"checkout--label\",htmlFor:\"select-checkout\"},\"Condi\\xE7\\xE3o de pagamento\"),/*#__PURE__*/React.createElement(\"select\",{class:\"form-control\",onChange:onInputChange,required:true,name:\"idCondicaoPagamento\",id:\"select-checkout\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Escolha o n\\xFAmero de parcelas\"),paymentTerms.map(function(paymentTerm,index){return/*#__PURE__*/React.createElement(\"option\",{key:\"payment-\".concat(index),value:paymentTerm.idCondicaoPagamento,selected:paymentTerm.idCondicaoPagamento===inputs.idCondicaoPagamento},paymentTerm.nParcelas,\"x (\",paymentTerm.Descricao,\")\");})))),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto checkout--texto-icon\"},lastPaymentTerm&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:\"./img/icone-info.svg\",alt:\"\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\xDAltima condi\\xE7\\xE3o utilizada | \",/*#__PURE__*/React.createElement(\"b\",null,lastPaymentTerm.Descricao)))),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto\"},\"Taxa de Juros: 0%\"),/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto mt-2\"},\"Encargos: R$ \",invoice.ValorTotalImposto?formatMoney(invoice.ValorTotalImposto,2,',','.'):'0,00')),/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--campo\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"titulo h4\"},\"Fechamento\"),/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--container_valor\"},/*#__PURE__*/React.createElement(\"p\",{className:\"checkout--texto_valor\"},\"Valor Total \",/*#__PURE__*/React.createElement(\"span\",{className:\"checkout--valor\"},\"R$ \",formatMoney(invoice.Valor,2,',','.'))),inputs.idCondicaoPagamento>0?/*#__PURE__*/React.createElement(\"button\",{\"data-toggle\":\"modal\",\"data-target\":\"#modalCheckout\",className:\"btn btn--laranja\"},\"Finalizar Pedido\"):/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return alert(\"Selecione a Condição de Pagamento\");},className:\"btn btn--laranja\"},\"Finalizar Pedido\")))):/*#__PURE__*/React.createElement(Loader,{short:\"false\"}),confirmScreen&&/*#__PURE__*/React.createElement(\"div\",{className:\"checkout--sucesso\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icobutton\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-check\"})),/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2 text-center\"},\"Seu pedido foi conclu\\xEDdo \",/*#__PURE__*/React.createElement(\"br\",null),\" com sucesso!\"),createElement('a',{href:'/pedidos',className:'btn btn--lg btn--roxo btn--bold'},'Ver todos os seus pedidos'))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},createElement('a',{href:'/carrinho',className:'link-texto'},'Voltar para o carrinho'))),/*#__PURE__*/React.createElement(Modal,{show:isOpen,className:\"modal modal-rate fade\"},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmitRate},/*#__PURE__*/React.createElement(\"h4\",null,\"Qual o seu n\\xEDvel de satisfa\\xE7\\xE3o com a experi\\xEAncia de compra?\"),/*#__PURE__*/React.createElement(Rater,{total:5,rating:rating,onRate:handleRate}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Para qualquer observa\\xE7\\xE3o, preencha o campo abaixo \",/*#__PURE__*/React.createElement(\"small\",null,\"(opcional)\"),\":\",/*#__PURE__*/React.createElement(\"textarea\",{onChange:onTextareaRateChange,required:true,name:\"obs\",className:\"input textarea\",id:\"obs\",rows:\"3\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn--laranja btn--full\"},\"Enviar\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal modal-checkout fade\",id:\"modalCheckout\",tabIndex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"modalCheckout\",\"aria-hidden\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog modal-dialog-centered\",role:\"document\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-times\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2 text-center\"},\"Finalizar Pedido?\"),/*#__PURE__*/React.createElement(\"p\",null,\"Deseja finalizar seu pedido de n\\xFAmero - \",invoice.NumeroPedido,\"?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"button\",{onClick:handlePaymentTerm,name:\"btn-checkout\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",className:\"btn btn--lg btn--laranja btn--bold\"},\"Sim, Finalizar!\"))))),/*#__PURE__*/React.createElement(Footer,null));};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{refreshCartFn:function refreshCartFn(data){return dispatch(CartActions.refreshCart(data));}};};export default connect('',mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/pages/Checkout.js"],"names":["React","useState","useEffect","createElement","Rater","Modal","Header","Footer","fetchClient","fetchCart","fetchPaymentTerms","postSelectedPaymentTerm","postEndCart","postSurveyRate","fetchDeliveryDate","formatMoney","disconnect","formatDateToView","scrollToTop","setItemSession","getItemSession","CartActions","connect","Loader","Swal","require","Checkout","refreshCartFn","client","setClient","invoice","setInvoice","isLoading","setLoading","paymentTerms","setPaymentTerms","lastPaymentTerm","setLastPaymentTerm","confirmScreen","setConfirmScreen","idCondicaoPagamento","inputs","setInputs","deliveryDate","setDeliveryDate","errors","setErrors","ratingOldInvoice","setRatingOldInvoice","rating","setRating","ratingObs","setRatingObs","isOpen","setIsOpen","showModal","hideModal","getDados","dados","JSON","parse","pedido","idCliente","then","result","data","Data","Dados","NumeroItens","window","location","href","process","env","REACT_APP_BASE_URL","catch","reject","last","filter","paymentTerm","UltimaUtilizada","handlePaymentTerm","e","preventDefault","resultEndCart","Codigo","CodigoInterno","Resultados","Pedido","ukPedido","newStorage","stringify","RealizarPesquisaSatisfacao","onInputChange","event","target","name","value","handleRate","onTextareaRateChange","handleSubmitRate","length","map","error","Mensagem","className","RazaoSocial","EnderecoCompleto","DataEntrega","index","nParcelas","Descricao","ValorTotalImposto","Valor","alert","NumeroPedido","mapDispatchToProps","dispatch","refreshCart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createElement } from 'react';\r\nimport Rater from 'react-rater'\r\nimport 'react-rater/lib/react-rater.css'\r\nimport Modal from \"react-bootstrap/Modal\";\r\n// default\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { fetchClient } from '../services/client-api';\r\nimport { fetchCart, fetchPaymentTerms, postSelectedPaymentTerm, postEndCart, postSurveyRate } from '../services/cart-api';\r\nimport { fetchDeliveryDate } from '../services/invoices-api';\r\nimport { formatMoney, disconnect, formatDateToView, scrollToTop, setItemSession, getItemSession } from '../utils';\r\nimport * as CartActions from '../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\nimport { Loader } from '../components/Loader/Loader';\r\nconst Swal = require('sweetalert2');\r\n\r\nconst Checkout = ({ refreshCartFn }) => {\r\n    const [client, setClient] = useState([]);\r\n    const [invoice, setInvoice] = useState([]);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const [paymentTerms, setPaymentTerms] = useState([]);\r\n    const [lastPaymentTerm, setLastPaymentTerm] = useState([]);\r\n    const [confirmScreen, setConfirmScreen] = useState(false);\r\n    const [inputs, setInputs] = useState({ idCondicaoPagamento: '' });\r\n    const [deliveryDate, setDeliveryDate] = useState('');\r\n    const [errors, setErrors] = useState([]);\r\n\r\n    const [ratingOldInvoice, setRatingOldInvoice] = useState(null);\r\n    const [rating, setRating] = useState(0);\r\n    const [ratingObs, setRatingObs] = useState(null);\r\n\r\n    // modal\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const showModal = () => {\r\n        setIsOpen(true);\r\n    };\r\n\r\n    const hideModal = () => {\r\n        setIsOpen(false);\r\n    };\r\n    // modal\r\n\r\n    const getDados = getItemSession('_dados');\r\n    const dados = JSON.parse(getDados);\r\n\r\n    const pedido = getItemSession('_pedido');\r\n\r\n    useEffect(() => {\r\n        fetchClient(dados.idCliente)\r\n            .then(result => {\r\n                setClient(result.data.Data.Dados[0])\r\n            });\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchCart(pedido)\r\n            .then(result => {\r\n                setInvoice(result.data.Data.Dados[0])\r\n                if (result.data.Data.Dados[0].NumeroItens === 0) {\r\n                    window.location.href = process.env.REACT_APP_BASE_URL\r\n                }\r\n\r\n                if (result.data.Data.Dados[0].idCondicaoPagamento > 0) {\r\n                    setInputs({\r\n                        ...inputs,\r\n                        ['idCondicaoPagamento']: result.data.Data.Dados[0].idCondicaoPagamento\r\n                    });\r\n                }\r\n\r\n                setRatingOldInvoice(pedido)\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchPaymentTerms()\r\n            .then(result => {\r\n                setPaymentTerms(result.data.Data.Dados)\r\n\r\n                const last = result.data.Data.Dados.filter(paymentTerm => paymentTerm.UltimaUtilizada === true)\r\n\r\n                setLastPaymentTerm(last[0])\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchDeliveryDate()\r\n            .then(result => {\r\n                setDeliveryDate(result.data.Data.Dados[0])\r\n            })\r\n            /* Deixado somente 1 disconnect */\r\n            // .catch(reject => {\r\n            //     disconnect();\r\n            // })\r\n    }, [])\r\n\r\n    const handlePaymentTerm = (e) => {\r\n        e.preventDefault();\r\n\r\n        scrollToTop();\r\n\r\n        setLoading(true);\r\n\r\n        postEndCart()\r\n            .then(resultEndCart => {\r\n                if (resultEndCart.data.Codigo === 400 && resultEndCart.data.CodigoInterno === 18) {\r\n                    setErrors(resultEndCart.data.Data.Resultados);\r\n                    setLoading(false);\r\n                } else {                    \r\n                    setItemSession('_pedido', resultEndCart.data.Data.Pedido.ukPedido);\r\n\r\n                    const newStorage = {\r\n                        \"QuantidadeRegistrosTotal\": 0,\r\n                        \"QuantidadeRegistrosRetornados\": 0,\r\n                        \"Paginas\": 1,\r\n                        \"ResultadosPorPagina\": 0,\r\n                        \"Dados\": []\r\n                    }\r\n                    setItemSession('_carrinho', JSON.stringify(newStorage));\r\n                    refreshCartFn(newStorage);\r\n\r\n                    setLoading(false);\r\n                    setConfirmScreen(true);\r\n\r\n                    if (invoice.RealizarPesquisaSatisfacao) {\r\n                        showModal();\r\n                    }\r\n                }\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }\r\n\r\n    const onInputChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setInputs({\r\n            ...inputs,\r\n            [name]: value\r\n        });\r\n\r\n        postSelectedPaymentTerm(value);\r\n    };\r\n\r\n    const handleRate = ({ rating }) => {\r\n        setRating(rating)\r\n    }\r\n\r\n    const onTextareaRateChange = event => {\r\n        setRatingObs(event.target.value);\r\n    };\r\n\r\n    const handleSubmitRate = (e) => {\r\n        e.preventDefault();\r\n        postSurveyRate(ratingOldInvoice, rating, ratingObs)\r\n            .then(result => {\r\n                hideModal()\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <section className=\"container checkout\">\r\n                <h2 className=\"titulo h2\">Fechamento do Pedido</h2>\r\n                <div className=\"checkout--container\">\r\n                    {!isLoading ? (\r\n                        !confirmScreen &&\r\n                        <div className=\"checkout--wrapper\">\r\n                            {errors.length > 0 &&\r\n                                <div class=\"alert alert-danger\" role=\"alert\">\r\n                                    <h4 class=\"alert-heading\">Atenção, seu pedido não foi gerado!</h4>\r\n                                    <p>Verifique o(s) erro(s) listado(s) abaixo:</p>\r\n                                    <hr />\r\n                                    <ul>\r\n                                        {errors.map(error => (<li class=\"mb-0\">{error.Mensagem}</li>))}\r\n                                    </ul>\r\n                                    {createElement('a', { href: '/carrinho', className: 'link-texto' }, 'Voltar para o carrinho')}\r\n                                </div>\r\n                            }\r\n\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Faturamento</h4>\r\n                                <p className=\"checkout--texto\">Faturar para {client.RazaoSocial}</p>\r\n                            </div>\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Entrega</h4>\r\n                                <p className=\"checkout--texto\">Endereço de Entrega</p>\r\n                                <p className=\"checkout--texto mt-0 checkout--max_width\">{client.EnderecoCompleto}</p>\r\n                                <p className=\"checkout--texto titulo--bold\">Data de entrega prevista: {' '}\r\n                                    {!deliveryDate.DataEntrega\r\n                                        ? 'Em definição'\r\n                                        : formatDateToView(deliveryDate.DataEntrega)}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Pagamento</h4>\r\n                                <form action=\"\">\r\n                                    <fieldset className=\"form-group\">\r\n                                        <label className=\"checkout--label\" htmlFor=\"select-checkout\">Condição de pagamento</label>                                        \r\n                                            <select class=\"form-control\" onChange={onInputChange} required name=\"idCondicaoPagamento\" id=\"select-checkout\">\r\n                                                <option value=\"\">Escolha o número de parcelas</option>\r\n                                                {paymentTerms.map((paymentTerm, index) => (\r\n                                                    <option\r\n                                                        key={`payment-${index}`}\r\n                                                        value={paymentTerm.idCondicaoPagamento}\r\n                                                        selected={paymentTerm.idCondicaoPagamento === inputs.idCondicaoPagamento}\r\n                                                    >{paymentTerm.nParcelas}x ({paymentTerm.Descricao})</option>\r\n                                                ))}\r\n                                            </select>\r\n                                    </fieldset>\r\n                                </form>\r\n                                <p className=\"checkout--texto checkout--texto-icon\">\r\n                                    {lastPaymentTerm &&\r\n                                        <>\r\n                                            <img src=\"./img/icone-info.svg\" alt=\"\" />\r\n                                            <span>Última condição utilizada | <b>{lastPaymentTerm.Descricao}</b></span>\r\n                                        </>\r\n                                    }\r\n                                </p>\r\n                                <p className=\"checkout--texto\">Taxa de Juros: 0%</p>\r\n                                <p className=\"checkout--texto mt-2\">Encargos: R$ {invoice.ValorTotalImposto ? formatMoney(invoice.ValorTotalImposto, 2, ',', '.') : '0,00'}</p>\r\n                            </div>\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Fechamento</h4>\r\n                                <div className=\"checkout--container_valor\">\r\n                                    <p className=\"checkout--texto_valor\">Valor Total <span className=\"checkout--valor\">R$ {formatMoney(invoice.Valor, 2, ',', '.')}</span></p>\r\n                                    {inputs.idCondicaoPagamento > 0\r\n                                        ? <button data-toggle=\"modal\" data-target=\"#modalCheckout\" className=\"btn btn--laranja\">Finalizar Pedido</button>\r\n                                        : <button onClick={() =>  alert(\"Selecione a Condição de Pagamento\")} className=\"btn btn--laranja\">Finalizar Pedido</button>\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    ) : (\r\n                            <Loader short=\"false\" />\r\n                        )}\r\n\r\n                    {confirmScreen &&\r\n                        <div className=\"checkout--sucesso\">\r\n                            <span className=\"icobutton\">\r\n                                <span className=\"icon icon-check\"></span>\r\n                            </span>\r\n\r\n                            <h2 className=\"titulo h2 text-center\">Seu pedido foi concluído <br /> com sucesso!</h2>\r\n\r\n                            {createElement('a', { href: '/pedidos', className: 'btn btn--lg btn--roxo btn--bold' }, 'Ver todos os seus pedidos')}\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <div className=\"text-center\">\r\n                    {createElement('a', { href: '/carrinho', className: 'link-texto' }, 'Voltar para o carrinho')}\r\n                </div>\r\n            </section>\r\n\r\n            {/* <!-- Modal --> */}\r\n            <Modal show={isOpen} className=\"modal modal-rate fade\">\r\n                <Modal.Body>\r\n                    <div className=\"text-center\">\r\n                        <form onSubmit={handleSubmitRate}>\r\n                            <h4>Qual o seu nível de satisfação com a experiência de compra?</h4>\r\n                            <Rater\r\n                                total={5}\r\n                                rating={rating}\r\n                                onRate={handleRate}\r\n                            />\r\n                            <br /><br />\r\n                            Para qualquer observação, preencha o campo abaixo <small>(opcional)</small>:\r\n                            <textarea onChange={onTextareaRateChange} required name=\"obs\" className=\"input textarea\" id=\"obs\" rows=\"3\"></textarea>\r\n                            <br />\r\n                            <button type=\"submit\" className=\"btn btn--laranja btn--full\">Enviar</button>\r\n                        </form>\r\n                    </div>\r\n                </Modal.Body>\r\n            </Modal>\r\n\r\n            <div className=\"modal modal-checkout fade\" id=\"modalCheckout\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"modalCheckout\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span className=\"icon icon-times\"></span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <h2 className=\"titulo h2 text-center\">Finalizar Pedido?</h2>\r\n                            <p>Deseja finalizar seu pedido de número - {invoice.NumeroPedido}?</p>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button onClick={handlePaymentTerm} name=\"btn-checkout\" data-dismiss=\"modal\" aria-label=\"Close\" className=\"btn btn--lg btn--laranja btn--bold\">Sim, Finalizar!</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </>\r\n    );\r\n}\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}