{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createElement}from'react';// default\nimport Header from'../components/Header';import Footer from'../components/Footer';import{Loader}from'../components/Loader/Loader';import{formatMoney,disconnect,formatDateToView,setItemSession}from'../utils';import{fetchInvoice,fetchInvoiceItems,fetchTracking,fetchExcel,fetchNF}from'../services/invoices-api';import{postDuplicateCart,fetchCartItems}from'../services/cart-api';import{trackingIcons}from'../constants/';import*as CartActions from'../store/actions/cart';import{connect}from'react-redux';var Swal=require('sweetalert2');var InvoiceDetail=function InvoiceDetail(_ref){var match=_ref.match,refreshCartFn=_ref.refreshCartFn;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),invoice=_useState4[0],setInvoice=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),invoiceItems=_useState6[0],setInvoiceItems=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),trackings=_useState8[0],setTracking=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),notasFiscais=_useState10[0],setNotasFiscais=_useState10[1];var idInvoice=match.params.id;useEffect(function(){fetchInvoice(idInvoice).then(function(result){setInvoice(result.data.Data.Dados[0]);setLoading(false);}).catch(function(reject){disconnect();});},[]);useEffect(function(){fetchInvoiceItems(idInvoice).then(function(result){if(result.data.Data){setInvoiceItems(result.data.Data.Dados);setLoading(false);}});/* Deixado somente 1 disconnect */ // .catch(reject => {\n//     disconnect();\n// })\n},[]);useEffect(function(){fetchTracking(idInvoice).then(function(result){if(result.data.Data){setTracking(result.data.Data.Dados);setLoading(false);}});/* Deixado somente 1 disconnect */ // .catch(reject => {\n//     disconnect();\n// })\n},[]);useEffect(function(){fetchNF(idInvoice).then(function(result){if(result.data.Data){setNotasFiscais(result.data.Data.Dados);}});/* Deixado somente 1 disconnect */ // .catch(reject => {\n//     disconnect();\n// })\n},[]);var handleExcel=function handleExcel(){fetchExcel(idInvoice).then(function(result){var data=result.data.Data.Arquivo;var arrayBuffer=base64ToArrayBuffer(data);createAndDownloadBlobFile(arrayBuffer,result.data.Data.NomeArquivo);}).catch(function(reject){disconnect();});};var handleDuplicateInvoice=function handleDuplicateInvoice(idInvoice){postDuplicateCart(idInvoice).then(function(result){if(result.data.Codigo===200){fetchCartItems().then(function(result){if(result.data.Data.Dados.length>0){setItemSession('_carrinho',JSON.stringify(result.data.Data));refreshCartFn(result.data.Data);window.location='/carrinho';}}).catch(function(reject){disconnect();});}else{console.debug('Error');}});};function base64ToArrayBuffer(base64){var binaryString=window.atob(base64);var bytes=new Uint8Array(binaryString.length);return bytes.map(function(byte,i){return binaryString.charCodeAt(i);});}function createAndDownloadBlobFile(body,filename){var blob=new Blob([body]);var fileName=filename;if(navigator.msSaveBlob){// IE 10+\nnavigator.msSaveBlob(blob,fileName);}else{var link=document.createElement('a');// Browsers that support HTML5 download attribute\nif(link.download!==undefined){var url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',fileName);link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);}}}var ItemStatusIcon=function ItemStatusIcon(invoiceItem){var faturada=invoiceItem.invoiceItem.QuantidadeFaturada;var pedida=invoiceItem.invoiceItem.QuantidadePedida;if(faturada===0){return/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-times c-laranja\"});}if(faturada===pedida){return/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-check c-roxo\"});}if(faturada<pedida){return/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-brightness c-roxo\"});}};var Tracking=function Tracking(){return trackings.map(function(tracking,index){return/*#__PURE__*/React.createElement(\"li\",{key:\"track-\".concat(index),className:tracking.Data?\"step step--active\":\"step\"},/*#__PURE__*/React.createElement(\"div\",{className:\"step-icon\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon \".concat(trackingIcons[tracking.CodigoStatusPedido])})),/*#__PURE__*/React.createElement(\"div\",{className:\"step-conteudo\"},/*#__PURE__*/React.createElement(\"span\",{className:\"step-data\"},tracking.Data&&formatDateToView(tracking.Data)),/*#__PURE__*/React.createElement(\"h6\",{className:\"titulo h6\"},tracking.Status)));});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"section\",{className:\"pedidos-detalhe container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sect-header\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"breadcrumb list-unstyled\"},/*#__PURE__*/React.createElement(\"li\",null,createElement('a',{href:'/'},\"Página Principal\")),/*#__PURE__*/React.createElement(\"li\",null,createElement('a',{href:'/pedidos'},\"Meus Pedidos\")),/*#__PURE__*/React.createElement(\"li\",{className:\"active\"},\"Detalhe do Pedido\")),/*#__PURE__*/React.createElement(\"div\",{className:\"sect-titulo\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2\"},\"Pedido \",/*#__PURE__*/React.createElement(\"span\",{className:\"c-laranja\"},invoice.NumeroPedido)))),/*#__PURE__*/React.createElement(\"div\",{className:\"row pedidos-detalhe--wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Status do pedido:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},/*#__PURE__*/React.createElement(\"b\",null,invoice.Status))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Valor da compra:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},/*#__PURE__*/React.createElement(\"b\",null,\"R$ \",formatMoney(invoice.Valor,2,',','.')))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Condi\\xE7\\xE3o de Pagamento\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},/*#__PURE__*/React.createElement(\"b\",null,invoice.CondicaoPagamento))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-md-3 col-lg-3 col-xl-2 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Data da Entrega Prevista:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},/*#__PURE__*/React.createElement(\"b\",null,!invoice.DataEntrega?'Em definição':formatDateToView(invoice.DataEntrega)+'-'+invoice.PeriodoEntrega))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-3 col-xl-4 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"button\",{\"data-toggle\":\"modal\",\"data-target\":\"#modalPedidosDetalhe\",className:\"btn btn--lg btn--branco btn--full btn--bold\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-bar-code\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Boleto de pagamento\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row pedidos-detalhe--wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 col-lg-4 col-xl-3 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Endere\\xE7o da Entrega\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},invoice.EnderecoEntrega)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-md-4 col-lg-3 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Agendamento da Entrega:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},\"Tempo estimado sujeito a mudan\\xE7as\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pedidos-detalhe--item-titulo\"},\"Data da Compra:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"pedidos-detalhe--item-conteudo\"},/*#__PURE__*/React.createElement(\"b\",null,formatDateToView(invoice.DataEmissao)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-3 col-xl-4 pedidos-detalhe--item\"},/*#__PURE__*/React.createElement(\"button\",{\"data-toggle\":\"modal\",\"data-target\":\"#modalNotaFiscal\",className:\"btn btn--lg btn--branco btn--full btn--bold\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-invoice\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Nota Fiscal\"),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-roxo\"},notasFiscais.length)))),/*#__PURE__*/React.createElement(\"div\",{className:\"steps\"},/*#__PURE__*/React.createElement(\"ol\",{className:\"steps-lista list-unstyled\"},!isLoading?/*#__PURE__*/React.createElement(Tracking,null):/*#__PURE__*/React.createElement(Loader,{short:\"false\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-6\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2 mb-0\"},\"Itens do pedido\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-3\"},/*#__PURE__*/React.createElement(\"a\",{onClick:handleExcel,className:\"btn btn--lg btn--branco btn--bold\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon icon-doc-excel\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Download Excel\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-3\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){if(window.confirm('Deseja repetir esse pedido?'))handleDuplicateInvoice(invoice.idPedido);},className:\"btn btn--lg btn--branco btn--bold\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-refresh\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Repetir Pedido\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"tabela-overflow\"},!isLoading?/*#__PURE__*/React.createElement(\"table\",{className:\"tabela tabela-listrada\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{width:\"40\",className:\"text-center\"},\"Status\"),/*#__PURE__*/React.createElement(\"th\",{width:\"100\",className:\"text-center\"},\"Qtd. Atendida\"),/*#__PURE__*/React.createElement(\"th\",{width:\"100\",className:\"text-center\"},\"Quantidade\"),/*#__PURE__*/React.createElement(\"th\",null,\"Descri\\xE7\\xE3o\"),/*#__PURE__*/React.createElement(\"th\",null,\"A\\xE7\\xE3o\"))),/*#__PURE__*/React.createElement(\"tbody\",null,invoiceItems.map(function(invoiceItem){return/*#__PURE__*/React.createElement(\"tr\",{key:\"invoice-item-\".concat(invoiceItem.Item)},/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},/*#__PURE__*/React.createElement(ItemStatusIcon,{invoiceItem:invoiceItem})),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},invoiceItem.QuantidadeFaturada),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},invoiceItem.QuantidadePedida),/*#__PURE__*/React.createElement(\"td\",null,invoiceItem.Descricao),/*#__PURE__*/React.createElement(\"td\",null,createElement('a',{href:\"/produto/\".concat(invoiceItem.idProduto),target:\"_blank\",className:\"link-texto link-texto--roxo font-weight-normal\"},\"Ver produto\")));}))):/*#__PURE__*/React.createElement(Loader,{short:\"false\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"sect-footer align-items-start\"},createElement('a',{href:'/pedidos',className:\"btn btn--cinza btn--block btn-full btn--bold\"},\"Voltar\"))),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(\"div\",{className:\"modal modal-boleto fade\",id:\"modalPedidosDetalhe\",tabIndex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"modalPedidosDetalhe\",\"aria-hidden\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog modal-dialog-centered\",role:\"document\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header_container\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../img/img-modal.png\",alt:\"Imagem representativa de uma folha de papel\"}),/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2\"},\"Seu boleto est\\xE1 dispon\\xEDvel no portal Rede blink\")),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon icon-times\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"ol\",{className:\"lista-modal\"},/*#__PURE__*/React.createElement(\"li\",{className:\"lista-modal_item\"},\"Acesse o Portal\"),/*#__PURE__*/React.createElement(\"li\",{className:\"lista-modal_item\"},\"Entre no item \",/*#__PURE__*/React.createElement(\"span\",null,\"\\\"Central de Compras\\\"\"),\" do menu\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal modal-boleto modal-nota fade\",id:\"modalNotaFiscal\",tabIndex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"modalNotaFiscal\",\"aria-hidden\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog modal-dialog-centered\",role:\"document\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header_container\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2\"},\"Notas Fiscais Dispon\\xEDveis\")),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon icon-times\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body px-0\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-borderless mb-0\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"N\\xFAmero Nota Fiscal\"),/*#__PURE__*/React.createElement(\"th\",null,\"Data\"),/*#__PURE__*/React.createElement(\"th\",null,\"A\\xE7\\xE3o\"))),/*#__PURE__*/React.createElement(\"tbody\",null,notasFiscais.map(function(notaFiscal){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,notaFiscal.NumeroNF),/*#__PURE__*/React.createElement(\"td\",null,formatDateToView(notaFiscal.DataEmissao)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:notaFiscal.Link,target:\"_blank\",className:\"link-texto link-texto--roxo font-weight-normal\"},\"Ver Nota\")));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"button\",{\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",className:\"btn btn--lg btn--roxo btn--bold\"},\"Fechar\"))))));};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{refreshCartFn:function refreshCartFn(data){return dispatch(CartActions.refreshCart(data));}};};export default connect('',mapDispatchToProps)(InvoiceDetail);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/pages/InvoiceDetail.js"],"names":["React","useState","useEffect","createElement","Header","Footer","Loader","formatMoney","disconnect","formatDateToView","setItemSession","fetchInvoice","fetchInvoiceItems","fetchTracking","fetchExcel","fetchNF","postDuplicateCart","fetchCartItems","trackingIcons","CartActions","connect","Swal","require","InvoiceDetail","match","refreshCartFn","isLoading","setLoading","invoice","setInvoice","invoiceItems","setInvoiceItems","trackings","setTracking","notasFiscais","setNotasFiscais","idInvoice","params","id","then","result","data","Data","Dados","catch","reject","handleExcel","Arquivo","arrayBuffer","base64ToArrayBuffer","createAndDownloadBlobFile","NomeArquivo","handleDuplicateInvoice","Codigo","length","JSON","stringify","window","location","console","debug","base64","binaryString","atob","bytes","Uint8Array","map","byte","i","charCodeAt","body","filename","blob","Blob","fileName","navigator","msSaveBlob","link","document","download","undefined","url","URL","createObjectURL","setAttribute","style","visibility","appendChild","click","removeChild","ItemStatusIcon","invoiceItem","faturada","QuantidadeFaturada","pedida","QuantidadePedida","Tracking","tracking","index","CodigoStatusPedido","Status","href","NumeroPedido","Valor","CondicaoPagamento","DataEntrega","PeriodoEntrega","EnderecoEntrega","DataEmissao","confirm","idPedido","Item","Descricao","idProduto","target","className","notaFiscal","NumeroNF","Link","mapDispatchToProps","dispatch","refreshCart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createElement } from 'react';\r\n// default\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { Loader } from '../components/Loader/Loader';\r\nimport { formatMoney, disconnect, formatDateToView, setItemSession } from '../utils';\r\nimport { fetchInvoice, fetchInvoiceItems, fetchTracking, fetchExcel, fetchNF } from '../services/invoices-api';\r\nimport { postDuplicateCart, fetchCartItems } from '../services/cart-api';\r\nimport { trackingIcons } from '../constants/'\r\nimport * as CartActions from '../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\n\r\nconst Swal = require('sweetalert2');\r\n\r\nconst InvoiceDetail = ({ match, refreshCartFn }) => {\r\n    const [isLoading, setLoading] = useState(true);\r\n    const [invoice, setInvoice] = useState([]);\r\n    const [invoiceItems, setInvoiceItems] = useState([]);\r\n    const [trackings, setTracking] = useState([]);\r\n    const [notasFiscais, setNotasFiscais] = useState([]);\r\n\r\n    const idInvoice = match.params.id;\r\n\r\n    useEffect(() => {\r\n        fetchInvoice(idInvoice)\r\n            .then(result => {\r\n                setInvoice(result.data.Data.Dados[0])\r\n                setLoading(false)\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchInvoiceItems(idInvoice)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setInvoiceItems(result.data.Data.Dados)\r\n                    setLoading(false)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchTracking(idInvoice)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setTracking(result.data.Data.Dados)\r\n                    setLoading(false)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchNF(idInvoice)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setNotasFiscais(result.data.Data.Dados)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n    }, [])\r\n\r\n    const handleExcel = () => {\r\n        fetchExcel(idInvoice)\r\n            .then(result => {\r\n                const data = result.data.Data.Arquivo;\r\n                const arrayBuffer = base64ToArrayBuffer(data);\r\n                createAndDownloadBlobFile(arrayBuffer, result.data.Data.NomeArquivo);\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n\r\n    }\r\n\r\n    const handleDuplicateInvoice = (idInvoice) => {\r\n        postDuplicateCart(idInvoice)\r\n            .then(result => {\r\n                if (result.data.Codigo === 200) {\r\n                    fetchCartItems()\r\n                        .then(result => {\r\n                            if (result.data.Data.Dados.length > 0) {\r\n                                setItemSession('_carrinho', JSON.stringify(result.data.Data))\r\n                                refreshCartFn(result.data.Data);\r\n                                window.location = '/carrinho';\r\n                            }\r\n                        })\r\n                        .catch(reject => {\r\n                            disconnect();\r\n                        })\r\n                } else {\r\n                    console.debug('Error')\r\n                }\r\n            })\r\n    }\r\n\r\n    function base64ToArrayBuffer(base64) {\r\n        const binaryString = window.atob(base64);\r\n        const bytes = new Uint8Array(binaryString.length);\r\n        return bytes.map((byte, i) => binaryString.charCodeAt(i));\r\n    }\r\n\r\n    function createAndDownloadBlobFile(body, filename) {\r\n        const blob = new Blob([body]);\r\n        const fileName = filename;\r\n        if (navigator.msSaveBlob) {\r\n            // IE 10+\r\n            navigator.msSaveBlob(blob, fileName);\r\n        } else {\r\n            const link = document.createElement('a');\r\n            // Browsers that support HTML5 download attribute\r\n            if (link.download !== undefined) {\r\n                const url = URL.createObjectURL(blob);\r\n                link.setAttribute('href', url);\r\n                link.setAttribute('download', fileName);\r\n                link.style.visibility = 'hidden';\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n        }\r\n    }\r\n\r\n    const ItemStatusIcon = invoiceItem => {\r\n        const faturada = invoiceItem.invoiceItem.QuantidadeFaturada;\r\n        const pedida = invoiceItem.invoiceItem.QuantidadePedida;\r\n\r\n        if (faturada === 0) {\r\n            return <span className=\"icon icon-times c-laranja\"></span>\r\n        }\r\n\r\n        if (faturada === pedida) {\r\n            return <span className=\"icon icon-check c-roxo\"></span>\r\n        }\r\n\r\n        if (faturada < pedida) {\r\n            return <span className=\"icon icon-brightness c-roxo\"></span>\r\n        }\r\n    }\r\n\r\n    const Tracking = () => {\r\n        return trackings.map((tracking, index) => (\r\n            <li key={`track-${index}`} className={tracking.Data ? \"step step--active\" : \"step\"}>\r\n                <div className=\"step-icon\"><span className={`icon ${trackingIcons[tracking.CodigoStatusPedido]}`}></span></div>\r\n                <div className=\"step-conteudo\">\r\n                    <span className=\"step-data\">{tracking.Data && formatDateToView(tracking.Data)}</span>\r\n                    <h6 className=\"titulo h6\">{tracking.Status}</h6>\r\n                </div>\r\n            </li>\r\n        ))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <section className=\"pedidos-detalhe container\">\r\n                <div className=\"sect-header\">\r\n                    <ul className=\"breadcrumb list-unstyled\">\r\n                        <li>\r\n                            {/* <a href=\"index.html\">Página Principal</a> */}\r\n                            {createElement('a', { href: '/' }, \"Página Principal\")}\r\n                        </li>\r\n                        <li>\r\n                            {/* <a href=\"pedidos.html\">Meus Pedidos</a> */}\r\n                            {createElement('a', { href: '/pedidos' }, \"Meus Pedidos\")}\r\n                        </li>\r\n                        <li className=\"active\">Detalhe do Pedido</li>\r\n                    </ul>\r\n                    <div className=\"sect-titulo\">\r\n                        <h2 className=\"titulo h2\">Pedido <span className=\"c-laranja\">{invoice.NumeroPedido}</span></h2>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row pedidos-detalhe--wrapper\">\r\n                    <div className=\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Status do pedido:</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\"><b>{invoice.Status}</b></p>\r\n                    </div>\r\n                    <div className=\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Valor da compra:</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\"><b>R$ {formatMoney(invoice.Valor, 2, ',', '.')}</b></p>\r\n                    </div>\r\n                    <div className=\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Condição de Pagamento</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\"><b>{invoice.CondicaoPagamento}</b></p>\r\n                    </div>\r\n                    <div className=\"col-6 col-md-3 col-lg-3 col-xl-2 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Data da Entrega Prevista:</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\"><b>\r\n                            {!invoice.DataEntrega\r\n                                ? 'Em definição'\r\n                                : formatDateToView(invoice.DataEntrega) + '-' + invoice.PeriodoEntrega}</b>\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"col-lg-3 col-xl-4 pedidos-detalhe--item\">\r\n                        <button data-toggle=\"modal\" data-target=\"#modalPedidosDetalhe\" className=\"btn btn--lg btn--branco btn--full btn--bold\"><span className=\"icon icon-bar-code\"></span><span>Boleto de pagamento</span></button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row pedidos-detalhe--wrapper\">\r\n                    <div className=\"col-md-5 col-lg-4 col-xl-3 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Endereço da Entrega</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\">{invoice.EnderecoEntrega}</p>\r\n                    </div>\r\n                    <div className=\"col-6 col-md-4 col-lg-3 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Agendamento da Entrega:</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\">Tempo estimado sujeito a mudanças</p>\r\n                    </div>\r\n                    <div className=\"col-6 col-md-3 col-lg-2 pedidos-detalhe--item\">\r\n                        <span className=\"pedidos-detalhe--item-titulo\">Data da Compra:</span>\r\n                        <p className=\"pedidos-detalhe--item-conteudo\"><b>{formatDateToView(invoice.DataEmissao)}</b></p>\r\n                    </div>\r\n                    <div className=\"col-lg-3 col-xl-4 pedidos-detalhe--item\">\r\n                        <button data-toggle=\"modal\" data-target=\"#modalNotaFiscal\" className=\"btn btn--lg btn--branco btn--full btn--bold\"><span className=\"icon icon-invoice\"></span><span>Nota Fiscal</span> <span className=\"badge badge-roxo\">{notasFiscais.length}</span></button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"steps\">\r\n                    <ol className=\"steps-lista list-unstyled\">\r\n                        {!isLoading ? (\r\n                            <Tracking />\r\n                        ) : (\r\n                                <Loader short=\"false\" />\r\n                            )}\r\n                    </ol>\r\n                </div>\r\n                <div className=\"row align-items-center\">\r\n                    <div className=\"col-md-6 col-lg-6\">\r\n                        <h2 className=\"titulo h2 mb-0\">Itens do pedido</h2>\r\n                    </div>\r\n                    <div className=\"col-md-6 col-lg-3\">\r\n                        <a onClick={handleExcel} className=\"btn btn--lg btn--branco btn--bold\">\r\n                            <i className=\"icon icon-doc-excel\"></i>\r\n                            <span>Download Excel</span>\r\n                        </a>\r\n                    </div>\r\n                    <div className=\"col-md-6 col-lg-3\">\r\n                        <a onClick={() => { if (window.confirm('Deseja repetir esse pedido?')) handleDuplicateInvoice(invoice.idPedido) }} className=\"btn btn--lg btn--branco btn--bold\">\r\n                            <i className=\"fa fa-refresh\"></i>\r\n                            <span>Repetir Pedido</span>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"tabela-overflow\">\r\n                    {!isLoading ? (\r\n                        <table className=\"tabela tabela-listrada\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th width=\"40\" className=\"text-center\">Status</th>\r\n                                    <th width=\"100\" className=\"text-center\">Qtd. Atendida</th>\r\n                                    <th width=\"100\" className=\"text-center\">Quantidade</th>\r\n                                    <th>Descrição</th>\r\n                                    <th>Ação</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {invoiceItems.map(invoiceItem =>\r\n                                    <tr key={`invoice-item-${invoiceItem.Item}`}>\r\n                                        <td className=\"text-center\">\r\n                                            <ItemStatusIcon invoiceItem={invoiceItem} />\r\n                                        </td>\r\n                                        <td className=\"text-center\">{invoiceItem.QuantidadeFaturada}</td>\r\n                                        <td className=\"text-center\">{invoiceItem.QuantidadePedida}</td>\r\n                                        <td>{invoiceItem.Descricao}</td>\r\n                                        <td>\r\n                                            {/* <a href=\"produtos-detalhe.html\" className=\"link-texto link-texto--roxo font-weight-normal\">Ver produto</a> */}\r\n                                            {createElement('a', { href: `/produto/${invoiceItem.idProduto}`, target: \"_blank\", className: \"link-texto link-texto--roxo font-weight-normal\" }, \"Ver produto\")}\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    ) : (\r\n                            <Loader short=\"false\" />\r\n                        )}\r\n                </div>\r\n\r\n                <div className=\"sect-footer align-items-start\">\r\n                    {createElement('a', { href: '/pedidos', className: \"btn btn--cinza btn--block btn-full btn--bold\" }, \"Voltar\")}\r\n                </div>\r\n            </section>\r\n            <Footer />\r\n\r\n            {/* <!-- Modal Boleto --> */}\r\n            <div className=\"modal modal-boleto fade\" id=\"modalPedidosDetalhe\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"modalPedidosDetalhe\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <div className=\"modal-header_container\">\r\n                                <img src=\"../img/img-modal.png\" alt=\"Imagem representativa de uma folha de papel\" />\r\n                                <h2 className=\"titulo h2\">Seu boleto está disponível no portal Rede blink</h2>\r\n                            </div>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <i className=\"icon icon-times\"></i>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <ol className=\"lista-modal\">\r\n                                <li className=\"lista-modal_item\">Acesse o Portal</li>\r\n                                <li className=\"lista-modal_item\">Entre no item <span>\"Central de Compras\"</span> do menu</li>\r\n                                {/* <li className=\"lista-modal_item\">Lorem Ipsum</li> */}\r\n                                {/* <li className=\"lista-modal_item\">Ipsum Lorem dorime</li> */}\r\n                            </ol>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* <!-- Modal NF --> */}\r\n            <div className=\"modal modal-boleto modal-nota fade\" id=\"modalNotaFiscal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"modalNotaFiscal\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <div className=\"modal-header_container\">\r\n                                <h2 className=\"titulo h2\">Notas Fiscais Disponíveis</h2>\r\n                            </div>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <i className=\"icon icon-times\"></i>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body px-0\">\r\n                            <table className=\"table table-borderless mb-0\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Número Nota Fiscal</th>\r\n                                        <th>Data</th>\r\n                                        <th>Ação</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {notasFiscais.map(notaFiscal => (\r\n                                        <tr>\r\n                                            <td>{notaFiscal.NumeroNF}</td>\r\n                                            <td>{formatDateToView(notaFiscal.DataEmissao)}</td>\r\n                                            <td><a href={notaFiscal.Link} target=\"_blank\" className=\"link-texto link-texto--roxo font-weight-normal\">Ver Nota</a></td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button data-dismiss=\"modal\" aria-label=\"Close\" className=\"btn btn--lg btn--roxo btn--bold\">Fechar</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(InvoiceDetail);"]},"metadata":{},"sourceType":"module"}