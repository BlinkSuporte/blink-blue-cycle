{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\src\\\\pages\\\\Home.js\";\nimport React, { useState, useEffect } from 'react'; // default\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport Banner from '../components/Home/Banner';\nimport Manufacturer from '../components/SideBar/Manufacturer';\nimport Category from '../components/SideBar/Category';\nimport Promotion from '../components/Home/Promotion';\nimport Release from '../components/Home/Release';\nimport BestSeller from '../components/Home/BestSeller';\nimport BannerAD from '../components/Home/BannerAD';\nimport OwnBrand from '../components/Home/OwnBrand';\nimport Modal from \"react-bootstrap/Modal\";\nimport { disconnect, setItemSession, getItemSession } from '../utils';\nimport { resetCart } from '../services/cart-api';\nimport * as CartActions from '../store/actions/cart';\nimport { connect } from 'react-redux';\nimport { fetchProductsByTagHome } from '../services/products-api';\n\nconst Home = ({\n  refreshCartFn\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenFull, setIsOpenFull] = useState(false);\n  const [promotions, setPromotions] = useState([]);\n  const [releases, setReleases] = useState([]);\n  const [ownBrands, setOwnBrands] = useState([]);\n  const [bestSellers, setBestSellers] = useState([]);\n\n  const showModal = () => {\n    setIsOpen(true);\n  };\n\n  const hideModal = () => {\n    setReadMessage();\n    setIsOpen(false);\n  };\n\n  const handleClearCart = () => {\n    setIsOpenFull(true);\n    setIsOpen(false);\n    resetCart().then(result => {\n      setDados(result.data.Data.Pedido.ukPedido);\n      const newStorage = {\n        \"QuantidadeRegistrosTotal\": 0,\n        \"QuantidadeRegistrosRetornados\": 0,\n        \"Paginas\": 1,\n        \"ResultadosPorPagina\": 0,\n        \"Dados\": []\n      };\n      setItemSession('_carrinho', JSON.stringify(newStorage));\n      refreshCartFn(newStorage);\n      setReadMessage();\n      setIsOpenFull(false);\n    }).catch(reject => {\n      disconnect();\n    });\n  };\n\n  useEffect(() => {\n    const readMessage = getItemSession('_home_message');\n    const numeroItens = getNumeroItens();\n\n    if (numeroItens > 0 && readMessage !== \"true\") {\n      showModal();\n    }\n  }, []);\n  useEffect(() => {\n    fetchProductsByTagHome('Promocao', 4).then(result => {\n      if (result.data.Data) {\n        setPromotions(result.data.Data.Dados);\n      }\n    });\n    /* Deixado somente 1 disconnect */\n    // .catch(reject => {\n    //     disconnect();\n    // })\n\n    fetchProductsByTagHome('Lancamento', 4).then(result => {\n      if (result.data.Data) {\n        setReleases(result.data.Data.Dados);\n      }\n    });\n    /* Deixado somente 1 disconnect */\n    // .catch(reject => {\n    //     disconnect();\n    // })\n\n    fetchProductsByTagHome('MarcaPropria', 4).then(result => {\n      if (result.data.Data) {\n        setOwnBrands(result.data.Data.Dados);\n      }\n    });\n    /* Deixado somente 1 disconnect */\n    // .catch(reject => {\n    //     disconnect();\n    // })\n\n    fetchProductsByTagHome('Revista', 4).then(result => {\n      if (result.data.Data) {\n        setBestSellers(result.data.Data.Dados);\n      }\n    });\n    /* Deixado somente 1 disconnect */\n    // .catch(reject => {\n    //     disconnect();\n    // })\n  }, []);\n\n  const getNumeroItens = () => {\n    const get = getItemSession('_dados');\n    const dados = JSON.parse(get);\n    return dados.NumeroItens;\n  };\n\n  const setDados = novoUkPedido => {\n    setItemSession('_pedido', novoUkPedido);\n  };\n\n  const setReadMessage = () => {\n    setItemSession('_home_message', true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Banner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"conteudo_interno container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filtro-sticky d-none d-lg-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Manufacturer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Category, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Promotion, {\n    destaque: promotions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Release, {\n    destaque: releases,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(BannerAD, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(BestSeller, {\n    destaque: bestSellers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(OwnBrand, {\n    destaque: ownBrands,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    show: isOpen,\n    className: \"modal modal-boleto fade\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titulo h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, \"Seu carrinho est\\xE1 com produto(s)!\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    onClick: hideModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"icon icon-times\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, \"Deseja mant\\xEA-lo e continuar incluindo itens nele?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-primary btn-sm btn-modal-home\",\n    onClick: hideModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, \"Sim, MANTER\"), ' ', /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-warning btn-sm btn-modal-home\",\n    onClick: handleClearCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, \"N\\xE3o, ESVAZIAR\"))), /*#__PURE__*/React.createElement(Modal, {\n    show: isOpenFull,\n    className: \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, \"Esvaziando carrinho!\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, \"Por favor, aguarde...\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 33\n    }\n  }, \"Loading...\")))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  refreshCartFn: data => dispatch(CartActions.refreshCart(data))\n});\n\nexport default connect('', mapDispatchToProps)(Home);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/pages/Home.js"],"names":["React","useState","useEffect","Header","Footer","Banner","Manufacturer","Category","Promotion","Release","BestSeller","BannerAD","OwnBrand","Modal","disconnect","setItemSession","getItemSession","resetCart","CartActions","connect","fetchProductsByTagHome","Home","refreshCartFn","isOpen","setIsOpen","isOpenFull","setIsOpenFull","promotions","setPromotions","releases","setReleases","ownBrands","setOwnBrands","bestSellers","setBestSellers","showModal","hideModal","setReadMessage","handleClearCart","then","result","setDados","data","Data","Pedido","ukPedido","newStorage","JSON","stringify","catch","reject","readMessage","numeroItens","getNumeroItens","Dados","get","dados","parse","NumeroItens","novoUkPedido","mapDispatchToProps","dispatch","refreshCart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// default\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\n\r\nimport Banner from '../components/Home/Banner';\r\nimport Manufacturer from '../components/SideBar/Manufacturer';\r\nimport Category from '../components/SideBar/Category';\r\nimport Promotion from '../components/Home/Promotion';\r\nimport Release from '../components/Home/Release';\r\nimport BestSeller from '../components/Home/BestSeller';\r\nimport BannerAD from '../components/Home/BannerAD';\r\nimport OwnBrand from '../components/Home/OwnBrand';\r\n\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { disconnect, setItemSession, getItemSession } from '../utils';\r\nimport { resetCart } from '../services/cart-api';\r\nimport * as CartActions from '../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\nimport { fetchProductsByTagHome } from '../services/products-api';\r\n\r\nconst Home = ({ refreshCartFn }) => {\r\n\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isOpenFull, setIsOpenFull] = useState(false);\r\n    const [promotions, setPromotions] = useState([]);\r\n    const [releases, setReleases] = useState([]);\r\n    const [ownBrands, setOwnBrands] = useState([]);\r\n    const [bestSellers, setBestSellers] = useState([]);\r\n\r\n    const showModal = () => {\r\n        setIsOpen(true);\r\n    };\r\n\r\n    const hideModal = () => {\r\n        setReadMessage();\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const handleClearCart = () => {\r\n        setIsOpenFull(true);\r\n        setIsOpen(false);\r\n\r\n        resetCart()\r\n            .then(result => {\r\n                setDados(result.data.Data.Pedido.ukPedido);\r\n\r\n                const newStorage = {\r\n                    \"QuantidadeRegistrosTotal\": 0,\r\n                    \"QuantidadeRegistrosRetornados\": 0,\r\n                    \"Paginas\": 1,\r\n                    \"ResultadosPorPagina\": 0,\r\n                    \"Dados\": []\r\n                }\r\n                setItemSession('_carrinho', JSON.stringify(newStorage))\r\n                refreshCartFn(newStorage);\r\n\r\n                setReadMessage();\r\n                setIsOpenFull(false);\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        const readMessage = getItemSession('_home_message');\r\n        const numeroItens = getNumeroItens();\r\n\r\n        if (numeroItens > 0 && readMessage !== \"true\") {\r\n            showModal()\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchProductsByTagHome('Promocao', 4)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setPromotions(result.data.Data.Dados)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n        fetchProductsByTagHome('Lancamento', 4)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setReleases(result.data.Data.Dados)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n        fetchProductsByTagHome('MarcaPropria', 4)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setOwnBrands(result.data.Data.Dados)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n        fetchProductsByTagHome('Revista', 4)\r\n            .then(result => {\r\n                if (result.data.Data) {\r\n                    setBestSellers(result.data.Data.Dados)\r\n                }\r\n            })\r\n        /* Deixado somente 1 disconnect */\r\n        // .catch(reject => {\r\n        //     disconnect();\r\n        // })\r\n    }, [])\r\n\r\n    const getNumeroItens = () => {\r\n        const get = getItemSession('_dados');\r\n        const dados = JSON.parse(get);\r\n        return dados.NumeroItens;\r\n    }\r\n\r\n    const setDados = (novoUkPedido) => {\r\n        setItemSession('_pedido', novoUkPedido);\r\n    }\r\n\r\n    const setReadMessage = () => {\r\n        setItemSession('_home_message', true);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <Banner />\r\n            <section className=\"conteudo_interno container\">\r\n                <div className=\"filtro-sticky d-none d-lg-block\">\r\n                    <Manufacturer />\r\n                    <Category />\r\n                </div>\r\n                <div className=\"cards-container\">\r\n                    <Promotion destaque={promotions} />\r\n                    <Release destaque={releases} />\r\n                    <BannerAD />\r\n                    <BestSeller destaque={bestSellers} />\r\n                    <OwnBrand destaque={ownBrands} />\r\n                </div>\r\n            </section>\r\n\r\n            {/* <!-- Modal --> */}\r\n            <Modal show={isOpen} className=\"modal modal-boleto fade\">\r\n                <Modal.Header>\r\n                    <div className=\"modal-header_container\">\r\n                        {/* <h2 className=\"titulo h2\">Existe(m) produto(s) em seu carrinho!</h2> */}\r\n                        <h2 className=\"titulo h2\">Seu carrinho está com produto(s)!</h2>\r\n                    </div>\r\n                    <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={hideModal}>\r\n                        <i className=\"icon icon-times\"></i>\r\n                    </button>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <p>Deseja mantê-lo e continuar incluindo itens nele?</p>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <button className=\"btn-primary btn-sm btn-modal-home\" onClick={hideModal}>Sim, MANTER</button>{' '}\r\n                    <button className=\"btn-warning btn-sm btn-modal-home\" onClick={handleClearCart}>Não, ESVAZIAR</button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n            <Modal show={isOpenFull} className=\"modal\">\r\n                <Modal.Body>\r\n                    <div className=\"text-center\">\r\n                        <h3>Esvaziando carrinho!</h3>\r\n                        <p>Por favor, aguarde...</p>\r\n                        <div>\r\n                            <div className=\"spinner-border\" role=\"status\">\r\n                                <span className=\"sr-only\">Loading...</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Modal.Body>\r\n            </Modal>\r\n\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}