{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createElement,useRef}from'react';// default\nimport Header from'../components/Header';import Footer from'../components/Footer';import{fetchAllInvoices}from'../services/invoices-api';import{formatMoney,disconnect,formatDateToView,formatDateToDatabase,setItemSession}from'../utils';import{Loader}from'../components/Loader/Loader';import{postDuplicateCart,fetchCartItems}from'../services/cart-api';import{trackingIcons}from'../constants/';import*as CartActions from'../store/actions/cart';import{connect}from'react-redux';var Swal=require('sweetalert2');var Invoices=function Invoices(_ref){var refreshCartFn=_ref.refreshCartFn;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),qtd=_useState4[0],setQtd=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),invoices=_useState6[0],setInvoices=_useState6[1];var _useState7=useState({numeroPedido:''}),_useState8=_slicedToArray(_useState7,2),inputs=_useState8[0],setInputs=_useState8[1];var fetchLocal=function fetchLocal(){var numeroPedido=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var dataInicial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var dataFinal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;setLoading(true);fetchAllInvoices(numeroPedido,dataInicial,dataFinal).then(function(result){setInvoices(result.data.Data.Dados);setQtd(result.data.Data.QuantidadeRegistrosTotal);setLoading(false);}).catch(function(reject){disconnect();});};useEffect(function(){fetchLocal();},[]);var handleDuplicateInvoice=function handleDuplicateInvoice(idPedido){postDuplicateCart(idPedido).then(function(resultDup){if(resultDup.data.Codigo===200){fetchCartItems().then(function(result){if(result.data.Data.Dados.length>0){setItemSession('_carrinho',JSON.stringify(result.data.Data));refreshCartFn(result.data.Data);window.location='/carrinho';}}).catch(function(reject){disconnect();});}else{console.debug('Error');}});};var inputDate=useRef(null);var onInputChange=function onInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var inputValue=inputDate.current.value;var dates=inputValue.split(\" a \");var dataInicial=formatDateToDatabase(dates[0]);var dataFinal=formatDateToDatabase(dates[1]);fetchLocal(inputs.numeroPedido,dataInicial,dataFinal);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"section\",{className:\"pedidos container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sect-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sect-titulo justify-content-between\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2\"},\"Pedidos\"),/*#__PURE__*/React.createElement(\"h6\",{className:\"titulo h6\"},\"Total de Pedidos: \",/*#__PURE__*/React.createElement(\"span\",{className:\"arial-bold\"},qtd))),/*#__PURE__*/React.createElement(\"hr\",null)),/*#__PURE__*/React.createElement(\"h4\",{className:\"titulo h4\"},\"Pesquisar\"),/*#__PURE__*/React.createElement(\"form\",{className:\"form-pedidos\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-pedidos--wrapper\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label\",htmlFor:\"pedido-numero\"},\"N\\xFAmero do pedido\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"input\",placeholder:\"Preencha com n\\xFAmero do pedido\",name:\"numeroPedido\",onChange:onInputChange})),/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-pedidos--wrapper\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label\",htmlFor:\"pedido-periodo\"},\"Data do pedido\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"pedido-periodo\",className:\"label-daterangepicker\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon icon-calendar\"}),/*#__PURE__*/React.createElement(\"span\",null,\"De\"),/*#__PURE__*/React.createElement(\"input\",{ref:inputDate,type:\"text\",className:\"input-daterangepicker\",name:\"daterange\",id:\"pedido-periodo\",readOnly:\"True\"}))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn--lg btn--laranja btn--full\"},\"Filtrar\")),/*#__PURE__*/React.createElement(\"h2\",{className:\"titulo h2 pedidos-titulo\"},\"\\xDAltimos Pedidos\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tabela-overflow\"},!isLoading?invoices.length>0?/*#__PURE__*/React.createElement(\"table\",{className:\"tabela tabela-listrada\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"th\",null,\"N. Pedido ERP\"),/*#__PURE__*/React.createElement(\"th\",null,\"N. Pedido WEB\"),/*#__PURE__*/React.createElement(\"th\",{width:\"160\"},\"Data de Emiss\\xE3o\"),/*#__PURE__*/React.createElement(\"th\",{width:\"200\"},\"Data de Entrega Prevista\"),/*#__PURE__*/React.createElement(\"th\",{width:\"175\"},\"Valor\"),/*#__PURE__*/React.createElement(\"th\",null,\"A\\xE7\\xE3o\"))),/*#__PURE__*/React.createElement(\"tbody\",null,invoices.map(function(invoice,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"position-relative\"},/*#__PURE__*/React.createElement(\"span\",{className:\"icon \".concat(trackingIcons[invoice.CodigoStatusPedido]),title:invoice.Status}))),/*#__PURE__*/React.createElement(\"td\",null,invoice.NumeroPedidoERP?'Em processamento':''),/*#__PURE__*/React.createElement(\"td\",null,invoice.NumeroPedido),/*#__PURE__*/React.createElement(\"td\",null,formatDateToView(invoice.DataEmissao)),/*#__PURE__*/React.createElement(\"td\",null,!invoice.DataEntrega?'Em definição':formatDateToView(invoice.DataEntrega)+'-'+invoice.PeriodoEntrega),/*#__PURE__*/React.createElement(\"td\",null,\"R$ \",formatMoney(invoice.Valor,2,',','.')),/*#__PURE__*/React.createElement(\"td\",null,createElement('a',{href:\"/pedido/\".concat(invoice.idPedido),className:\"c-roxo btn btn--link\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fas fa-eye\"})),/*#__PURE__*/React.createElement(\"button\",{\"data-toggle\":\"tooltip\",\"data-placement\":\"top\",title:\"Repetir Pedido\",className:\"c-roxo btn btn--link\",onClick:function onClick(){if(window.confirm('Deseja repetir esse pedido?'))handleDuplicateInvoice(invoice.idPedido);}},/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-refresh\"}))));}))):/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-warning\",role:\"alert\"},\"Nenhum pedido encontrado\"):/*#__PURE__*/React.createElement(Loader,{short:\"false\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"sect-footer align-items-start\"},createElement('a',{href:'/',className:\"btn btn--cinza btn--block btn-full btn--bold\"},\"Voltar\"))),/*#__PURE__*/React.createElement(Footer,null));};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{refreshCartFn:function refreshCartFn(data){return dispatch(CartActions.refreshCart(data));}};};export default connect('',mapDispatchToProps)(Invoices);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/pages/Invoices.js"],"names":["React","useState","useEffect","createElement","useRef","Header","Footer","fetchAllInvoices","formatMoney","disconnect","formatDateToView","formatDateToDatabase","setItemSession","Loader","postDuplicateCart","fetchCartItems","trackingIcons","CartActions","connect","Swal","require","Invoices","refreshCartFn","isLoading","setLoading","qtd","setQtd","invoices","setInvoices","numeroPedido","inputs","setInputs","fetchLocal","dataInicial","dataFinal","then","result","data","Data","Dados","QuantidadeRegistrosTotal","catch","reject","handleDuplicateInvoice","idPedido","resultDup","Codigo","length","JSON","stringify","window","location","console","debug","inputDate","onInputChange","event","target","name","value","handleSubmit","e","preventDefault","inputValue","current","dates","split","map","invoice","index","CodigoStatusPedido","Status","NumeroPedidoERP","NumeroPedido","DataEmissao","DataEntrega","PeriodoEntrega","Valor","href","className","confirm","mapDispatchToProps","dispatch","refreshCart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createElement, useRef } from 'react';\r\n// default\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { fetchAllInvoices } from '../services/invoices-api';\r\nimport { formatMoney, disconnect, formatDateToView, formatDateToDatabase, setItemSession } from '../utils';\r\nimport { Loader } from '../components/Loader/Loader';\r\nimport { postDuplicateCart, fetchCartItems } from '../services/cart-api';\r\nimport { trackingIcons } from '../constants/'\r\nimport * as CartActions from '../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\nconst Swal = require('sweetalert2');\r\n\r\nconst Invoices = ({ refreshCartFn }) => {\r\n    const [isLoading, setLoading] = useState(true);\r\n    const [qtd, setQtd] = useState(0);\r\n    const [invoices, setInvoices] = useState([]);\r\n\r\n    const [inputs, setInputs] = useState({\r\n        numeroPedido: ''\r\n    });\r\n\r\n    const fetchLocal = (numeroPedido = null, dataInicial = null, dataFinal = null) => {\r\n        setLoading(true);\r\n\r\n        fetchAllInvoices(numeroPedido, dataInicial, dataFinal)\r\n            .then(result => {\r\n                setInvoices(result.data.Data.Dados)\r\n                setQtd(result.data.Data.QuantidadeRegistrosTotal)\r\n                setLoading(false)\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchLocal();\r\n    }, [])\r\n\r\n    const handleDuplicateInvoice = (idPedido) => {\r\n        postDuplicateCart(idPedido)\r\n            .then(resultDup => {\r\n                if (resultDup.data.Codigo === 200) {\r\n                    fetchCartItems()\r\n                        .then(result => {\r\n                            if (result.data.Data.Dados.length > 0) {\r\n                                setItemSession('_carrinho', JSON.stringify(result.data.Data))\r\n                                refreshCartFn(result.data.Data);\r\n                                window.location = '/carrinho';\r\n                            }\r\n                        })\r\n                        .catch(reject => {\r\n                            disconnect();\r\n                        })\r\n                } else {\r\n                    console.debug('Error')\r\n                }\r\n            })\r\n    }\r\n\r\n    const inputDate = useRef(null);\r\n\r\n    const onInputChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setInputs({\r\n            ...inputs,\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        let inputValue = inputDate.current.value;\r\n        let dates = inputValue.split(\" a \");\r\n\r\n        const dataInicial = formatDateToDatabase(dates[0]);\r\n        const dataFinal = formatDateToDatabase(dates[1]);\r\n\r\n        fetchLocal(inputs.numeroPedido, dataInicial, dataFinal);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <section className=\"pedidos container\">\r\n                <div className=\"sect-header\">\r\n                    <div className=\"sect-titulo justify-content-between\">\r\n                        <h2 className=\"titulo h2\">Pedidos</h2>\r\n                        <h6 className=\"titulo h6\">Total de Pedidos: <span className=\"arial-bold\">{qtd}</span></h6>\r\n                    </div>\r\n                    <hr />\r\n                </div>\r\n\r\n                <h4 className=\"titulo h4\">Pesquisar</h4>\r\n                <form className=\"form-pedidos\" onSubmit={handleSubmit}>\r\n                    <fieldset className=\"form-pedidos--wrapper\">\r\n                        <label className=\"input-label\" htmlFor=\"pedido-numero\">Número do pedido</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"input\"\r\n                            placeholder=\"Preencha com número do pedido\"\r\n                            name=\"numeroPedido\"\r\n                            onChange={onInputChange}\r\n                        />\r\n                    </fieldset>\r\n                    <fieldset className=\"form-pedidos--wrapper\">\r\n                        <label className=\"input-label\" htmlFor=\"pedido-periodo\">Data do pedido</label>\r\n                        <label htmlFor=\"pedido-periodo\" className=\"label-daterangepicker\">\r\n                            <span className=\"icon icon-calendar\"></span>\r\n                            <span>De</span>\r\n                            <input\r\n                                ref={inputDate}\r\n                                type=\"text\"\r\n                                className=\"input-daterangepicker\"\r\n                                name=\"daterange\"\r\n                                id=\"pedido-periodo\"\r\n                                readOnly=\"True\"\r\n                            />\r\n                        </label>\r\n                    </fieldset>\r\n                    <button type=\"submit\" className=\"btn btn--lg btn--laranja btn--full\">Filtrar</button>\r\n                </form>\r\n\r\n                <h2 className=\"titulo h2 pedidos-titulo\">Últimos Pedidos</h2>\r\n                <div className=\"tabela-overflow\">\r\n                    {!isLoading ? (\r\n                        invoices.length > 0 ? (\r\n\r\n                            <table className=\"tabela tabela-listrada\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Status</th>\r\n                                        <th>N. Pedido ERP</th>\r\n                                        <th>N. Pedido WEB</th>\r\n                                        <th width=\"160\">Data de Emissão</th>\r\n                                        <th width=\"200\">Data de Entrega Prevista</th>\r\n                                        <th width=\"175\">Valor</th>\r\n                                        <th>Ação</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {invoices.map((invoice, index) =>\r\n                                        <tr key={index}>\r\n                                            <td>\r\n                                                <span className=\"position-relative\">\r\n                                                    <span className={`icon ${trackingIcons[invoice.CodigoStatusPedido]}`} title={invoice.Status}></span>\r\n                                                    {/* <span className=\"tag--table tag--table-roxo\">!</span> */}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td>{invoice.NumeroPedidoERP ? 'Em processamento': ''}</td>\r\n                                            <td>{invoice.NumeroPedido}</td>\r\n                                            <td>{formatDateToView(invoice.DataEmissao)}</td>\r\n                                            <td>\r\n                                                {!invoice.DataEntrega\r\n                                                    ? 'Em definição'\r\n                                                    : formatDateToView(invoice.DataEntrega) + '-' + invoice.PeriodoEntrega}\r\n                                            </td>\r\n                                            <td>R$ {formatMoney(invoice.Valor, 2, ',', '.')}</td>\r\n                                            <td>\r\n                                                {/* <a href=\"/\" className=\"btn btn-link c-roxo\">Ver pedido</a>  */}\r\n                                                {createElement('a', { href: `/pedido/${invoice.idPedido}`, className: \"c-roxo btn btn--link\" }, <span className=\"fas fa-eye\"></span>)}\r\n                                                <button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Repetir Pedido\" className=\"c-roxo btn btn--link\" onClick={() => { if (window.confirm('Deseja repetir esse pedido?')) handleDuplicateInvoice(invoice.idPedido) }}><span className=\"fa fa-refresh\"></span></button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        ) : (\r\n                                <div className=\"alert alert-warning\" role=\"alert\">\r\n                                    Nenhum pedido encontrado\r\n                                </div>\r\n                            )\r\n\r\n                    ) : (\r\n                            <Loader short=\"false\" />\r\n                        )}\r\n\r\n                </div>\r\n\r\n                <div className=\"sect-footer align-items-start\">\r\n                    {/* <a href=\"/\" className=\"btn btn--cinza btn--block btn-full btn--bold\">Voltar</a> */}\r\n                    {createElement('a', { href: '/', className: \"btn btn--cinza btn--block btn-full btn--bold\" }, \"Voltar\")}\r\n                </div>\r\n            </section>\r\n            <Footer />\r\n        </>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(Invoices);"]},"metadata":{},"sourceType":"module"}