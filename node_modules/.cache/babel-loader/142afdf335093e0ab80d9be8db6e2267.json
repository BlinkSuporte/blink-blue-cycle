{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,createElement}from'react';// import { Link } from 'react-router-dom';\nimport{formatMoney,disconnect}from'../../utils';import{addToCart,fetchCartItems,updateCart}from'../../services/cart-api';import*as CartActions from'../../store/actions/cart';import{connect}from'react-redux';import{setItemSession,getItemSession}from'../../utils';var Swal=require('sweetalert2');var ProductCard=function ProductCard(_ref){var product=_ref.product,origin=_ref.origin,refreshCartFn=_ref.refreshCartFn;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setQuantity=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),adding=_useState4[0],setAdding=_useState4[1];var decrement=function decrement(){return setQuantity(function(q){return isNaN(q)||q<2?0:q-1;});};var increment=function increment(){return setQuantity(function(q){return q>=0?q+1:1;});};var handleChange=function handleChange(e){if(parseInt(e.target.value)>0){setQuantity(parseInt(e.target.value));}else{setQuantity();}};var handleAddToCart=function handleAddToCart(e){e.preventDefault();var intQuantity=parseInt(quantity);if(isNaN(intQuantity)||intQuantity<1){alert(\"Insira uma quantidade válida para o produto!\");return false;}setAdding(true);buttonActionDisabled(e);var get=getItemSession('_carrinho');var cartItems=JSON.parse(get);var item=cartItems.Dados.filter(function(item){return item.idProduto===product.idProduto;});var time=2000;if(item.length>0){var newQuantity=intQuantity+parseInt(item[0].Quantidade);updateCart(product.idProduto,item[0].Item,newQuantity).then(function(resultUpdate){if(resultUpdate.data.Codigo===500){alert(resultUpdate.data.Status);setAdding(false);time=0;buttonActionEnabled(e);}else{fetchCartItems().then(function(result){if(result.data.Data.Dados.length>0){setItemSession('_carrinho',JSON.stringify(result.data.Data));refreshCartFn(result.data.Data);}buttonActionEnabled(e);setAdding(false);}).catch(function(reject){disconnect();buttonActionEnabled(e);setAdding(false);});}}).catch(function(reject){disconnect();buttonActionEnabled(e);});}else{addToCart(product.idProduto,intQuantity,origin).then(function(resultAdd){if(resultAdd.data.Codigo===500){if(resultAdd.data.CodigoInterno==4){disconnect();}else{alert(resultAdd.data.Status);setAdding(false);time=0;}buttonActionEnabled(e);}else{fetchCartItems().then(function(result){if(result.data.Data.Dados.length>0){setItemSession('_carrinho',JSON.stringify(result.data.Data));refreshCartFn(result.data.Data);}}).then(function(result){buttonActionEnabled(e);setAdding(false);}).catch(function(reject){disconnect();buttonActionEnabled(e);setAdding(false);});}}).catch(function(reject){disconnect();buttonActionEnabled(e);});}};var buttonActionDisabled=function buttonActionDisabled(e){e.persist();e.target.disabled=true;};var buttonActionEnabled=function buttonActionEnabled(e){e.persist();e.target.disabled=false;};return/*#__PURE__*/React.createElement(\"div\",{className:\"card-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-item--header\"},product.Lancamento===true&&/*#__PURE__*/React.createElement(\"span\",{className:\"tag--card-item\"},\"Novidade\"),createElement('a',{href:\"/produto/\".concat(product.idProduto),className:'link-item'},/*#__PURE__*/React.createElement(\"img\",{src:product.LinkImagemLista,alt:\"\",className:\"img-card-produto\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-item--body\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"card-item--titulo\"},createElement('a',{href:\"/produto/\".concat(product.idProduto)},product.Descricao)),product.PossuiPrecoPromocional?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{className:\"card-item--valor--de\"},/*#__PURE__*/React.createElement(\"strike\",null,\"R$ \",formatMoney(product.PrecoUnitario,2,',','.')),\" \",/*#__PURE__*/React.createElement(\"small\",null,\"unidade\")),/*#__PURE__*/React.createElement(\"p\",{className:\"card-item--valor--por\"},\"R$ \",formatMoney(product.PrecoPromocionalUnitario,2,',','.'),\" \",/*#__PURE__*/React.createElement(\"small\",null,\"unidade\")),/*#__PURE__*/React.createElement(\"p\",{className:\"card-item--valor-total\"},/*#__PURE__*/React.createElement(\"b\",null,\"Total: de \",/*#__PURE__*/React.createElement(\"strike\",null,\"R$ \",formatMoney(product.Preco,2,',','.')),\" por R$ \",formatMoney(product.PrecoPromocional,2,',','.')))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{className:\"card-item--valor\"},\"R$ \",formatMoney(product.PrecoUnitario,2,',','.'),\" \",/*#__PURE__*/React.createElement(\"small\",null,\"unidade\")),/*#__PURE__*/React.createElement(\"p\",{className:\"card-item--valor-total\"},/*#__PURE__*/React.createElement(\"b\",null,\"Total R$ \",formatMoney(product.Preco,2,',','.')))),/*#__PURE__*/React.createElement(\"p\",{className:\"card-item--estoque\"},product.Estoque>0?\"\".concat(product.Estoque,\" dispon\\xEDveis\"):/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-black-white\"},\"Produto indispon\\xEDvel\"))),product.Estoque>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"card-item--footer\"},/*#__PURE__*/React.createElement(\"form\",{className:\"form-adicionar\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"btn-item\",className:\"btn form-adicionar--btn\",onClick:decrement},\"-\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",name:\"quantity\",value:quantity,className:\"card-item--counter\",onChange:handleChange,maxLength:4}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"btn-item\",className:\"btn form-adicionar--btn\",onClick:increment},\"+\")),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleAddToCart,className:\"btn btn-add btn--roxo btn--bold \".concat(adding&&'active')},adding?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border spinner-border-sm text-light\"}),\" Adicionando\"):'Adicionar')));};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{refreshCartFn:function refreshCartFn(data){return dispatch(CartActions.refreshCart(data));}};};export default connect('',mapDispatchToProps)(ProductCard);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/components/Product/ProductCard.js"],"names":["React","useState","createElement","formatMoney","disconnect","addToCart","fetchCartItems","updateCart","CartActions","connect","setItemSession","getItemSession","Swal","require","ProductCard","product","origin","refreshCartFn","quantity","setQuantity","adding","setAdding","decrement","q","isNaN","increment","handleChange","e","parseInt","target","value","handleAddToCart","preventDefault","intQuantity","alert","buttonActionDisabled","get","cartItems","JSON","parse","item","Dados","filter","idProduto","time","length","newQuantity","Quantidade","Item","then","resultUpdate","data","Codigo","Status","buttonActionEnabled","result","Data","stringify","catch","reject","resultAdd","CodigoInterno","persist","disabled","Lancamento","href","className","LinkImagemLista","Descricao","PossuiPrecoPromocional","PrecoUnitario","PrecoPromocionalUnitario","Preco","PrecoPromocional","Estoque","mapDispatchToProps","dispatch","refreshCart"],"mappings":"6JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,aAA1B,KAA+C,OAA/C,CACA;AACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,aAAxC,CACA,OAASC,SAAT,CAAoBC,cAApB,CAAoCC,UAApC,KAAsD,yBAAtD,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,0BAA7B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,aAA/C,CACA,GAAMC,CAAAA,IAAI,CAAGC,OAAO,CAAC,aAAD,CAApB,CAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAwC,IAArCC,CAAAA,OAAqC,MAArCA,OAAqC,CAA5BC,MAA4B,MAA5BA,MAA4B,CAApBC,aAAoB,MAApBA,aAAoB,eACxBhB,QAAQ,CAAC,CAAD,CADgB,wCACjDiB,QADiD,eACvCC,WADuC,8BAE5BlB,QAAQ,CAAC,KAAD,CAFoB,yCAEjDmB,MAFiD,eAEzCC,SAFyC,eAIxD,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,SAAMH,CAAAA,WAAW,CAAC,SAAAI,CAAC,QAAIC,CAAAA,KAAK,CAACD,CAAD,CAAL,EAAYA,CAAC,CAAG,CAAhB,CAAoB,CAApB,CAAwBA,CAAC,CAAG,CAAhC,EAAF,CAAjB,EAAlB,CACA,GAAME,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,SAAMN,CAAAA,WAAW,CAAC,SAAAI,CAAC,QAAIA,CAAAA,CAAC,EAAI,CAAL,CAASA,CAAC,CAAG,CAAb,CAAiB,CAArB,EAAF,CAAjB,EAAlB,CAEA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxB,GAAIC,QAAQ,CAACD,CAAC,CAACE,MAAF,CAASC,KAAV,CAAR,CAA2B,CAA/B,CAAkC,CAC9BX,WAAW,CAACS,QAAQ,CAACD,CAAC,CAACE,MAAF,CAASC,KAAV,CAAT,CAAX,CACH,CAFD,IAEO,CACHX,WAAW,GACd,CACJ,CAND,CAQA,GAAMY,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACJ,CAAD,CAAO,CAC3BA,CAAC,CAACK,cAAF,GAEA,GAAMC,CAAAA,WAAW,CAAGL,QAAQ,CAACV,QAAD,CAA5B,CAEA,GAAIM,KAAK,CAACS,WAAD,CAAL,EAAsBA,WAAW,CAAG,CAAxC,CAA2C,CACvCC,KAAK,CAAC,8CAAD,CAAL,CACA,MAAO,MAAP,CACH,CAEDb,SAAS,CAAC,IAAD,CAAT,CAEAc,oBAAoB,CAACR,CAAD,CAApB,CAEA,GAAMS,CAAAA,GAAG,CAAGzB,cAAc,CAAC,WAAD,CAA1B,CACA,GAAM0B,CAAAA,SAAS,CAAGC,IAAI,CAACC,KAAL,CAAWH,GAAX,CAAlB,CAEA,GAAMI,CAAAA,IAAI,CAAGH,SAAS,CAACI,KAAV,CAAgBC,MAAhB,CAAuB,SAAAF,IAAI,CAAI,CAAE,MAAOA,CAAAA,IAAI,CAACG,SAAL,GAAmB5B,OAAO,CAAC4B,SAAlC,CAA6C,CAA9E,CAAb,CAEA,GAAIC,CAAAA,IAAI,CAAG,IAAX,CAEA,GAAIJ,IAAI,CAACK,MAAL,CAAc,CAAlB,CAAqB,CACjB,GAAMC,CAAAA,WAAW,CAAGb,WAAW,CAAGL,QAAQ,CAACY,IAAI,CAAC,CAAD,CAAJ,CAAQO,UAAT,CAA1C,CAEAxC,UAAU,CAACQ,OAAO,CAAC4B,SAAT,CAAoBH,IAAI,CAAC,CAAD,CAAJ,CAAQQ,IAA5B,CAAkCF,WAAlC,CAAV,CACKG,IADL,CACU,SAAAC,YAAY,CAAI,CAClB,GAAIA,YAAY,CAACC,IAAb,CAAkBC,MAAlB,GAA6B,GAAjC,CAAsC,CAClClB,KAAK,CAACgB,YAAY,CAACC,IAAb,CAAkBE,MAAnB,CAAL,CAClBhC,SAAS,CAAC,KAAD,CAAT,CACkBuB,IAAI,CAAG,CAAP,CAClBU,mBAAmB,CAAC3B,CAAD,CAAnB,CACe,CALD,IAKO,CACHrB,cAAc,GACT2C,IADL,CACU,SAAAM,MAAM,CAAI,CACZ,GAAIA,MAAM,CAACJ,IAAP,CAAYK,IAAZ,CAAiBf,KAAjB,CAAuBI,MAAvB,CAAgC,CAApC,CAAuC,CAEnCnC,cAAc,CAAC,WAAD,CAAc4B,IAAI,CAACmB,SAAL,CAAeF,MAAM,CAACJ,IAAP,CAAYK,IAA3B,CAAd,CAAd,CACAvC,aAAa,CAACsC,MAAM,CAACJ,IAAP,CAAYK,IAAb,CAAb,CACH,CACzBF,mBAAmB,CAAC3B,CAAD,CAAnB,CACAN,SAAS,CAAC,KAAD,CAAT,CACqB,CATL,EAUKqC,KAVL,CAUW,SAAAC,MAAM,CAAI,CACbvD,UAAU,GAClCkD,mBAAmB,CAAC3B,CAAD,CAAnB,CACAN,SAAS,CAAC,KAAD,CAAT,CACqB,CAdL,EAeH,CAEJ,CAzBL,EA0BKqC,KA1BL,CA0BW,SAAAC,MAAM,CAAI,CACbvD,UAAU,GACzBkD,mBAAmB,CAAC3B,CAAD,CAAnB,CACY,CA7BL,EA8BH,CAjCD,IAiCO,CACHtB,SAAS,CAACU,OAAO,CAAC4B,SAAT,CAAoBV,WAApB,CAAiCjB,MAAjC,CAAT,CACKiC,IADL,CACU,SAAAW,SAAS,CAAI,CACf,GAAIA,SAAS,CAACT,IAAV,CAAeC,MAAf,GAA0B,GAA9B,CAAmC,CAC/B,GAAIQ,SAAS,CAACT,IAAV,CAAeU,aAAf,EAAgC,CAApC,CAAuC,CACnCzD,UAAU,GACb,CAFD,IAEO,CACH8B,KAAK,CAAC0B,SAAS,CAACT,IAAV,CAAeE,MAAhB,CAAL,CACrBhC,SAAS,CAAC,KAAD,CAAT,CACqBuB,IAAI,CAAG,CAAP,CACH,CACnBU,mBAAmB,CAAC3B,CAAD,CAAnB,CACe,CATD,IASO,CACHrB,cAAc,GACT2C,IADL,CACU,SAAAM,MAAM,CAAI,CACZ,GAAIA,MAAM,CAACJ,IAAP,CAAYK,IAAZ,CAAiBf,KAAjB,CAAuBI,MAAvB,CAAgC,CAApC,CAAuC,CACnCnC,cAAc,CAAC,WAAD,CAAc4B,IAAI,CAACmB,SAAL,CAAeF,MAAM,CAACJ,IAAP,CAAYK,IAA3B,CAAd,CAAd,CACAvC,aAAa,CAACsC,MAAM,CAACJ,IAAP,CAAYK,IAAb,CAAb,CACH,CACJ,CANL,EAOhBP,IAPgB,CAOX,SAAAM,MAAM,CAAI,CACfD,mBAAmB,CAAC3B,CAAD,CAAnB,CACAN,SAAS,CAAC,KAAD,CAAT,CACA,CAVgB,EAWKqC,KAXL,CAWW,SAAAC,MAAM,CAAI,CACbvD,UAAU,GAClCkD,mBAAmB,CAAC3B,CAAD,CAAnB,CACAN,SAAS,CAAC,KAAD,CAAT,CACqB,CAfL,EAgBH,CACJ,CA7BL,EA8BKqC,KA9BL,CA8BW,SAAAC,MAAM,CAAI,CACbvD,UAAU,GACzBkD,mBAAmB,CAAC3B,CAAD,CAAnB,CACY,CAjCL,EAkCH,CAEJ,CA3FD,CA6FA,GAAMQ,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACR,CAAD,CAAO,CACtCA,CAAC,CAACmC,OAAF,GACMnC,CAAC,CAACE,MAAF,CAASkC,QAAT,CAAoB,IAApB,CACH,CAHD,CAIA,GAAMT,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAC3B,CAAD,CAAO,CACrCA,CAAC,CAACmC,OAAF,GACMnC,CAAC,CAACE,MAAF,CAASkC,QAAT,CAAoB,KAApB,CACH,CAHD,CAKA,mBACI,2BAAK,SAAS,CAAC,WAAf,eACI,2BAAK,SAAS,CAAC,mBAAf,EACKhD,OAAO,CAACiD,UAAR,GAAuB,IAAvB,eAA+B,4BAAM,SAAS,CAAC,gBAAhB,aADpC,CAGK9D,aAAa,CAAC,GAAD,CAAM,CAAE+D,IAAI,oBAAclD,OAAO,CAAC4B,SAAtB,CAAN,CAAyCuB,SAAS,CAAE,WAApD,CAAN,cAAyE,2BAAK,GAAG,CAAEnD,OAAO,CAACoD,eAAlB,CAAmC,GAAG,CAAC,EAAvC,CAA0C,SAAS,CAAC,kBAApD,EAAzE,CAHlB,CADJ,cAMI,2BAAK,SAAS,CAAC,iBAAf,eAEI,0BAAI,SAAS,CAAC,mBAAd,EAEKjE,aAAa,CAAC,GAAD,CAAM,CAAE+D,IAAI,oBAAclD,OAAO,CAAC4B,SAAtB,CAAN,CAAN,CAAiD5B,OAAO,CAACqD,SAAzD,CAFlB,CAFJ,CAMKrD,OAAO,CAACsD,sBAAR,cAEO,qDACI,yBAAG,SAAS,CAAC,sBAAb,eAAoC,wCAAYlE,WAAW,CAACY,OAAO,CAACuD,aAAT,CAAwB,CAAxB,CAA2B,GAA3B,CAAgC,GAAhC,CAAvB,CAApC,kBAA0G,2CAA1G,CADJ,cAEI,yBAAG,SAAS,CAAC,uBAAb,QAAyCnE,WAAW,CAACY,OAAO,CAACwD,wBAAT,CAAmC,CAAnC,CAAsC,GAAtC,CAA2C,GAA3C,CAApD,kBAAqG,2CAArG,CAFJ,cAGI,yBAAG,SAAS,CAAC,wBAAb,eAAsC,uDAAa,wCAAYpE,WAAW,CAACY,OAAO,CAACyD,KAAT,CAAgB,CAAhB,CAAmB,GAAnB,CAAwB,GAAxB,CAAvB,CAAb,YAAmFrE,WAAW,CAACY,OAAO,CAAC0D,gBAAT,CAA2B,CAA3B,CAA8B,GAA9B,CAAmC,GAAnC,CAA9F,CAAtC,CAHJ,CAFP,cAQO,qDACI,yBAAG,SAAS,CAAC,kBAAb,QAAoCtE,WAAW,CAACY,OAAO,CAACuD,aAAT,CAAwB,CAAxB,CAA2B,GAA3B,CAAgC,GAAhC,CAA/C,kBAAqF,2CAArF,CADJ,cAEI,yBAAG,SAAS,CAAC,wBAAb,eAAsC,yCAAanE,WAAW,CAACY,OAAO,CAACyD,KAAT,CAAgB,CAAhB,CAAmB,GAAnB,CAAwB,GAAxB,CAAxB,CAAtC,CAFJ,CAdZ,cAmBI,yBAAG,SAAS,CAAC,oBAAb,EAAmCzD,OAAO,CAAC2D,OAAR,CAAkB,CAAlB,WAAyB3D,OAAO,CAAC2D,OAAjC,iCAAyD,4BAAM,SAAS,CAAC,yBAAhB,4BAA5F,CAnBJ,CANJ,CA2BK3D,OAAO,CAAC2D,OAAR,CAAkB,CAAlB,eACG,2BAAK,SAAS,CAAC,mBAAf,eACI,4BAAM,SAAS,CAAC,gBAAhB,eACI,8BACI,IAAI,CAAC,QADT,CAEI,IAAI,CAAC,UAFT,CAGI,SAAS,CAAC,yBAHd,CAII,OAAO,CAAEpD,SAJb,MADJ,cAMI,6BACI,IAAI,CAAC,QADT,CAEI,IAAI,CAAC,UAFT,CAGI,KAAK,CAAEJ,QAHX,CAII,SAAS,CAAC,oBAJd,CAKI,QAAQ,CAAEQ,YALd,CAMI,SAAS,CAAE,CANf,EANJ,cAeI,8BACI,IAAI,CAAC,QADT,CAEI,IAAI,CAAC,UAFT,CAGI,SAAS,CAAC,yBAHd,CAII,OAAO,CAAED,SAJb,MAfJ,CADJ,cAsBI,8BACI,IAAI,CAAC,QADT,CAEI,OAAO,CAAEM,eAFb,CAGI,SAAS,2CAAqCX,MAAM,EAAI,QAA/C,CAHb,EAKKA,MAAM,cACD,qDAAE,2BAAK,SAAS,CAAC,6CAAf,EAAF,gBADC,CAED,WAPV,CAtBJ,CA5BR,CADJ,CAkEH,CAvLD,CAyLA,GAAMuD,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACpC3D,aAAa,CAAE,uBAACkC,IAAD,QAAUyB,CAAAA,QAAQ,CAACpE,WAAW,CAACqE,WAAZ,CAAwB1B,IAAxB,CAAD,CAAlB,EADqB,CAAL,EAAnC,CAIA,cAAe1C,CAAAA,OAAO,CAAC,EAAD,CAAKkE,kBAAL,CAAP,CAAgC7D,WAAhC,CAAf","sourcesContent":["import React, { useState, createElement } from 'react';\r\n// import { Link } from 'react-router-dom';\r\nimport { formatMoney, disconnect } from '../../utils';\r\nimport { addToCart, fetchCartItems, updateCart } from '../../services/cart-api';\r\nimport * as CartActions from '../../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\nimport { setItemSession, getItemSession } from '../../utils';\r\nconst Swal = require('sweetalert2');\r\n\r\n\r\nconst ProductCard = ({ product, origin, refreshCartFn }) => {\r\n    const [quantity, setQuantity] = useState(0)\r\n    const [adding, setAdding] = useState(false)\r\n\r\n    const decrement = () => setQuantity(q => isNaN(q) || q < 2 ? 0 : q - 1);\r\n    const increment = () => setQuantity(q => q >= 0 ? q + 1 : 1);\r\n\r\n    const handleChange = (e) => {\r\n        if (parseInt(e.target.value) > 0) {\r\n            setQuantity(parseInt(e.target.value));\r\n        } else {\r\n            setQuantity();\r\n        }\r\n    }\r\n\r\n    const handleAddToCart = (e) => {\r\n        e.preventDefault();\r\n\r\n        const intQuantity = parseInt(quantity);\r\n\r\n        if (isNaN(intQuantity) || intQuantity < 1) {\r\n            alert(\"Insira uma quantidade válida para o produto!\");\r\n            return false;\r\n        }\r\n\r\n        setAdding(true);\r\n\r\n        buttonActionDisabled(e);\r\n\r\n        const get = getItemSession('_carrinho');\r\n        const cartItems = JSON.parse(get);\r\n\r\n        const item = cartItems.Dados.filter(item => { return item.idProduto === product.idProduto })\r\n\r\n        let time = 2000;\r\n\r\n        if (item.length > 0) {\r\n            const newQuantity = intQuantity + parseInt(item[0].Quantidade)\r\n\r\n            updateCart(product.idProduto, item[0].Item, newQuantity)\r\n                .then(resultUpdate => {\r\n                    if (resultUpdate.data.Codigo === 500) {\r\n                        alert(resultUpdate.data.Status);\r\n\t\t\t\t\t\tsetAdding(false);\r\n                        time = 0;\r\n\t\t\t\t\t\tbuttonActionEnabled(e);\r\n                    } else {\r\n                        fetchCartItems()\r\n                            .then(result => {\r\n                                if (result.data.Data.Dados.length > 0) {\r\n\r\n                                    setItemSession('_carrinho', JSON.stringify(result.data.Data))\r\n                                    refreshCartFn(result.data.Data)\r\n                                }\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n                            })\r\n                            .catch(reject => {\r\n                                disconnect();\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n                            })\r\n                    }\r\n                   \r\n                })\r\n                .catch(reject => {\r\n                    disconnect();\r\n\t\t\t\t\tbuttonActionEnabled(e);\r\n                })\r\n        } else {\r\n            addToCart(product.idProduto, intQuantity, origin)\r\n                .then(resultAdd => {\r\n                    if (resultAdd.data.Codigo === 500) {\r\n                        if (resultAdd.data.CodigoInterno == 4) {\r\n                            disconnect()\r\n                        } else {\r\n                            alert(resultAdd.data.Status);\r\n\t\t\t\t\t\t\tsetAdding(false);\r\n                            time = 0;\r\n                        }\r\n\t\t\t\t\t\tbuttonActionEnabled(e);\r\n                    } else {\r\n                        fetchCartItems()\r\n                            .then(result => {\r\n                                if (result.data.Data.Dados.length > 0) {\r\n                                    setItemSession('_carrinho', JSON.stringify(result.data.Data))\r\n                                    refreshCartFn(result.data.Data)\r\n                                }\r\n                            })\r\n\t\t\t\t\t\t\t.then(result => {\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n\t\t\t\t\t\t\t})\r\n                            .catch(reject => {\r\n                                disconnect();\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n                            })\r\n                    }\r\n                })\r\n                .catch(reject => {\r\n                    disconnect();\r\n\t\t\t\t\tbuttonActionEnabled(e);\r\n                })\r\n        }\r\n       \r\n    }\r\n\r\n    const buttonActionDisabled = (e) => {\r\n\t\te.persist();\r\n        e.target.disabled = true;\r\n    }\r\n    const buttonActionEnabled = (e) => {\r\n\t\te.persist();\r\n        e.target.disabled = false;\r\n    }\r\n\r\n    return (\r\n        <div className=\"card-item\">\r\n            <div className=\"card-item--header\">\r\n                {product.Lancamento === true && <span className=\"tag--card-item\">Novidade</span>}\r\n                {/* <img src={product.LinkImagemLista} alt=\"\" className=\"img-card-produto\" /> */}\r\n                {createElement('a', { href: `/produto/${product.idProduto}`, className: 'link-item' }, <img src={product.LinkImagemLista} alt=\"\" className=\"img-card-produto\" />)}\r\n            </div>\r\n            <div className=\"card-item--body\">\r\n                {/* <p className=\"card-item--codigo\">EAN: {product.EAN}</p> */}\r\n                <h5 className=\"card-item--titulo\">\r\n                    {/* <Link to={`/produto/${product.idProduto}`}>{product.Descricao}</Link> */}\r\n                    {createElement('a', { href: `/produto/${product.idProduto}` }, product.Descricao)}\r\n                </h5>\r\n                {product.PossuiPrecoPromocional\r\n                    ?\r\n                        <>\r\n                            <p className=\"card-item--valor--de\"><strike>R$ {formatMoney(product.PrecoUnitario, 2, ',', '.')}</strike> <small>unidade</small></p>\r\n                            <p className=\"card-item--valor--por\">R$ {formatMoney(product.PrecoPromocionalUnitario, 2, ',', '.')} <small>unidade</small></p>\r\n                            <p className=\"card-item--valor-total\"><b>Total: de <strike>R$ {formatMoney(product.Preco, 2, ',', '.')}</strike> por R$ {formatMoney(product.PrecoPromocional, 2, ',', '.')}</b></p>\r\n                        </>\r\n                    :\r\n                        <>\r\n                            <p className=\"card-item--valor\">R$ {formatMoney(product.PrecoUnitario, 2, ',', '.')} <small>unidade</small></p>\r\n                            <p className=\"card-item--valor-total\"><b>Total R$ {formatMoney(product.Preco, 2, ',', '.')}</b></p>\r\n                        </>\r\n                }\r\n                <p className=\"card-item--estoque\">{product.Estoque > 0 ? `${product.Estoque} disponíveis` : <span className=\"badge badge-black-white\">Produto indisponível</span>}</p>\r\n            </div>\r\n            {product.Estoque > 0 &&\r\n                <div className=\"card-item--footer\">\r\n                    <form className=\"form-adicionar\">\r\n                        <button\r\n                            type=\"button\"\r\n                            name=\"btn-item\"\r\n                            className=\"btn form-adicionar--btn\"\r\n                            onClick={decrement}>-</button>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"quantity\"\r\n                            value={quantity}\r\n                            className=\"card-item--counter\"\r\n                            onChange={handleChange}\r\n                            maxLength={4}\r\n\r\n                        />\r\n                        <button\r\n                            type=\"button\"\r\n                            name=\"btn-item\"\r\n                            className=\"btn form-adicionar--btn\"\r\n                            onClick={increment}>+</button>\r\n                    </form>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleAddToCart}\r\n                        className={`btn btn-add btn--roxo btn--bold ${adding && 'active'}`}\r\n                    >\r\n                        {adding\r\n                            ? <><div className=\"spinner-border spinner-border-sm text-light\"></div> Adicionando</>                            \r\n                            : 'Adicionar'\r\n                        }\r\n                        \r\n                    </button>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(ProductCard);"]},"metadata":{},"sourceType":"module"}