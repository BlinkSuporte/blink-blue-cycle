{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\src\\\\pages\\\\Checkout.js\";\nimport React, { useState, useEffect, createElement } from 'react';\nimport Rater from 'react-rater';\nimport 'react-rater/lib/react-rater.css';\nimport Modal from \"react-bootstrap/Modal\"; // default\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { fetchClient } from '../services/client-api';\nimport { fetchCart, fetchPaymentTerms, postSelectedPaymentTerm, postEndCart, postSurveyRate } from '../services/cart-api';\nimport { fetchDeliveryDate } from '../services/invoices-api';\nimport { formatMoney, disconnect, formatDateToView, scrollToTop, setItemSession, getItemSession } from '../utils';\nimport * as CartActions from '../store/actions/cart';\nimport { connect } from 'react-redux';\nimport { Loader } from '../components/Loader/Loader';\n\nconst Swal = require('sweetalert2');\n\nconst Checkout = ({\n  refreshCartFn\n}) => {\n  const [client, setClient] = useState([]);\n  const [invoice, setInvoice] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const [paymentTerms, setPaymentTerms] = useState([]);\n  const [lastPaymentTerm, setLastPaymentTerm] = useState([]);\n  const [confirmScreen, setConfirmScreen] = useState(false);\n  const [inputs, setInputs] = useState({\n    idCondicaoPagamento: ''\n  });\n  const [deliveryDate, setDeliveryDate] = useState('');\n  const [errors, setErrors] = useState([]);\n  const [ratingOldInvoice, setRatingOldInvoice] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [ratingObs, setRatingObs] = useState(null); // modal\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const showModal = () => {\n    setIsOpen(true);\n  };\n\n  const hideModal = () => {\n    setIsOpen(false);\n  }; // modal\n\n\n  const getDados = getItemSession('_dados');\n  const dados = JSON.parse(getDados);\n  const pedido = getItemSession('_pedido');\n  useEffect(() => {\n    fetchClient(dados.idCliente).then(result => {\n      setClient(result.data.Data.Dados[0]);\n    });\n  }, []);\n  useEffect(() => {\n    fetchCart(pedido).then(result => {\n      setInvoice(result.data.Data.Dados[0]);\n\n      if (result.data.Data.Dados[0].NumeroItens === 0) {\n        window.location.href = process.env.REACT_APP_BASE_URL;\n      }\n\n      if (result.data.Data.Dados[0].idCondicaoPagamento > 0) {\n        setInputs({ ...inputs,\n          ['idCondicaoPagamento']: result.data.Data.Dados[0].idCondicaoPagamento\n        });\n      }\n\n      setRatingOldInvoice(pedido);\n    }).catch(reject => {\n      disconnect();\n    });\n  }, []);\n  useEffect(() => {\n    fetchPaymentTerms().then(result => {\n      setPaymentTerms(result.data.Data.Dados);\n      const last = result.data.Data.Dados.filter(paymentTerm => paymentTerm.UltimaUtilizada === true);\n      setLastPaymentTerm(last[0]);\n    });\n  }, []);\n  useEffect(() => {\n    fetchDeliveryDate().then(result => {\n      setDeliveryDate(result.data.Data.Dados[0]);\n    });\n    /* Deixado somente 1 disconnect */\n    // .catch(reject => {\n    //     disconnect();\n    // })\n  }, []);\n\n  const handlePaymentTerm = e => {\n    e.preventDefault();\n    scrollToTop();\n    setLoading(true);\n    postEndCart().then(resultEndCart => {\n      if (resultEndCart.data.Codigo === 400 && resultEndCart.data.CodigoInterno === 18) {\n        setErrors(resultEndCart.data.Data.Resultados);\n        setLoading(false);\n      } else {\n        setItemSession('_pedido', resultEndCart.data.Data.Pedido.ukPedido);\n        const newStorage = {\n          \"QuantidadeRegistrosTotal\": 0,\n          \"QuantidadeRegistrosRetornados\": 0,\n          \"Paginas\": 1,\n          \"ResultadosPorPagina\": 0,\n          \"Dados\": []\n        };\n        setItemSession('_carrinho', JSON.stringify(newStorage));\n        refreshCartFn(newStorage);\n        setLoading(false);\n        setConfirmScreen(true);\n\n        if (invoice.RealizarPesquisaSatisfacao) {\n          showModal();\n        }\n      }\n    }).catch(reject => {\n      disconnect();\n    });\n  };\n\n  const onInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setInputs({ ...inputs,\n      [name]: value\n    });\n    postSelectedPaymentTerm(value);\n  };\n\n  const handleRate = ({\n    rating\n  }) => {\n    setRating(rating);\n  };\n\n  const onTextareaRateChange = event => {\n    setRatingObs(event.target.value);\n  };\n\n  const handleSubmitRate = e => {\n    e.preventDefault();\n    postSurveyRate(ratingOldInvoice, rating, ratingObs).then(result => {\n      hideModal();\n    }).catch(reject => {\n      disconnect();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"container checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titulo h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, \"Fechamento do Pedido\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, !isLoading ? !confirmScreen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, errors.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    class: \"alert alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    class: \"alert-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }, \"Aten\\xE7\\xE3o, seu pedido n\\xE3o foi gerado!\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 37\n    }\n  }, \"Verifique o(s) erro(s) listado(s) abaixo:\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 37\n    }\n  }, errors.map(error => /*#__PURE__*/React.createElement(\"li\", {\n    class: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 63\n    }\n  }, error.Mensagem))), createElement('a', {\n    href: '/carrinho',\n    className: 'link-texto'\n  }, 'Voltar para o carrinho')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"titulo h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 33\n    }\n  }, \"Faturamento\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 33\n    }\n  }, \"Faturar para \", client.RazaoSocial)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"titulo h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 33\n    }\n  }, \"Entrega\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 33\n    }\n  }, \"Endere\\xE7o de Entrega\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto mt-0 checkout--max_width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 33\n    }\n  }, client.EnderecoCompleto), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto titulo--bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 33\n    }\n  }, \"Data de entrega prevista: \", ' ', !deliveryDate.DataEntrega ? 'Em definição' : formatDateToView(deliveryDate.DataEntrega))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"titulo h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 33\n    }\n  }, \"Pagamento\"), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"checkout--label\",\n    htmlFor: \"select-checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 41\n    }\n  }, \"Condi\\xE7\\xE3o de pagamento\"), /*#__PURE__*/React.createElement(\"select\", {\n    class: \"form-control\",\n    onChange: onInputChange,\n    required: true,\n    name: \"idCondicaoPagamento\",\n    id: \"select-checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 49\n    }\n  }, \"Escolha o n\\xFAmero de parcelas\"), paymentTerms.map((paymentTerm, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: `payment-${index}`,\n    value: paymentTerm.idCondicaoPagamento,\n    selected: paymentTerm.idCondicaoPagamento === inputs.idCondicaoPagamento,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 53\n    }\n  }, paymentTerm.nParcelas, \"x (\", paymentTerm.Descricao, \")\"))))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto checkout--texto-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 33\n    }\n  }, lastPaymentTerm && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./img/icone-info.svg\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 45\n    }\n  }, \"\\xDAltima condi\\xE7\\xE3o utilizada | \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 79\n    }\n  }, lastPaymentTerm.Descricao)))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 33\n    }\n  }, \"Taxa de Juros: 0%\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 33\n    }\n  }, \"Encargos: R$ \", invoice.ValorTotalImposto ? formatMoney(invoice.ValorTotalImposto, 2, ',', '.') : '0,00')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--campo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"titulo h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 33\n    }\n  }, \"Fechamento\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--container_valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"checkout--texto_valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 37\n    }\n  }, \"Valor Total \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"checkout--valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 86\n    }\n  }, \"R$ \", formatMoney(invoice.Valor, 2, ',', '.'))), inputs.idCondicaoPagamento > 0 ? /*#__PURE__*/React.createElement(\"button\", {\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#modalCheckout\",\n    className: \"btn btn--laranja\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 43\n    }\n  }, \"Finalizar Pedido\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => alert(\"Selecione a Condição de Pagamento\"),\n    className: \"btn btn--laranja\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 43\n    }\n  }, \"Finalizar Pedido\")))) : /*#__PURE__*/React.createElement(Loader, {\n    short: \"false\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 29\n    }\n  }), confirmScreen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout--sucesso\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icobutton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon icon-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titulo h2 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 29\n    }\n  }, \"Seu pedido foi conclu\\xEDdo \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 92\n    }\n  }), \" com sucesso!\"), createElement('a', {\n    href: '/pedidos',\n    className: 'btn btn--lg btn--roxo btn--bold'\n  }, 'Ver todos os seus pedidos'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, createElement('a', {\n    href: '/carrinho',\n    className: 'link-texto'\n  }, 'Voltar para o carrinho'))), /*#__PURE__*/React.createElement(Modal, {\n    show: isOpen,\n    className: \"modal modal-rate fade\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmitRate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 29\n    }\n  }, \"Qual o seu n\\xEDvel de satisfa\\xE7\\xE3o com a experi\\xEAncia de compra?\"), /*#__PURE__*/React.createElement(Rater, {\n    total: 5,\n    rating: rating,\n    onRate: handleRate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 35\n    }\n  }), \"Para qualquer observa\\xE7\\xE3o, preencha o campo abaixo \", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 79\n    }\n  }, \"(opcional)\"), \":\", /*#__PURE__*/React.createElement(\"textarea\", {\n    onChange: onTextareaRateChange,\n    required: true,\n    name: \"obs\",\n    className: \"input textarea\",\n    id: \"obs\",\n    rows: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn--laranja btn--full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 29\n    }\n  }, \"Enviar\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal modal-checkout fade\",\n    id: \"modalCheckout\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"modalCheckout\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-centered\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon icon-times\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titulo h2 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 29\n    }\n  }, \"Finalizar Pedido?\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 29\n    }\n  }, \"Deseja finalizar seu pedido de n\\xFAmero - \", invoice.NumeroPedido, \"?\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handlePaymentTerm,\n    name: \"btn-checkout\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    className: \"btn btn--lg btn--laranja btn--bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 29\n    }\n  }, \"Sim, Finalizar!\"))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }\n  }));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  refreshCartFn: data => dispatch(CartActions.refreshCart(data))\n});\n\nexport default connect('', mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/pages/Checkout.js"],"names":["React","useState","useEffect","createElement","Rater","Modal","Header","Footer","fetchClient","fetchCart","fetchPaymentTerms","postSelectedPaymentTerm","postEndCart","postSurveyRate","fetchDeliveryDate","formatMoney","disconnect","formatDateToView","scrollToTop","setItemSession","getItemSession","CartActions","connect","Loader","Swal","require","Checkout","refreshCartFn","client","setClient","invoice","setInvoice","isLoading","setLoading","paymentTerms","setPaymentTerms","lastPaymentTerm","setLastPaymentTerm","confirmScreen","setConfirmScreen","inputs","setInputs","idCondicaoPagamento","deliveryDate","setDeliveryDate","errors","setErrors","ratingOldInvoice","setRatingOldInvoice","rating","setRating","ratingObs","setRatingObs","isOpen","setIsOpen","showModal","hideModal","getDados","dados","JSON","parse","pedido","idCliente","then","result","data","Data","Dados","NumeroItens","window","location","href","process","env","REACT_APP_BASE_URL","catch","reject","last","filter","paymentTerm","UltimaUtilizada","handlePaymentTerm","e","preventDefault","resultEndCart","Codigo","CodigoInterno","Resultados","Pedido","ukPedido","newStorage","stringify","RealizarPesquisaSatisfacao","onInputChange","event","name","value","target","handleRate","onTextareaRateChange","handleSubmitRate","length","map","error","Mensagem","className","RazaoSocial","EnderecoCompleto","DataEntrega","index","nParcelas","Descricao","ValorTotalImposto","Valor","alert","NumeroPedido","mapDispatchToProps","dispatch","refreshCart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createElement } from 'react';\r\nimport Rater from 'react-rater'\r\nimport 'react-rater/lib/react-rater.css'\r\nimport Modal from \"react-bootstrap/Modal\";\r\n// default\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { fetchClient } from '../services/client-api';\r\nimport { fetchCart, fetchPaymentTerms, postSelectedPaymentTerm, postEndCart, postSurveyRate } from '../services/cart-api';\r\nimport { fetchDeliveryDate } from '../services/invoices-api';\r\nimport { formatMoney, disconnect, formatDateToView, scrollToTop, setItemSession, getItemSession } from '../utils';\r\nimport * as CartActions from '../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\nimport { Loader } from '../components/Loader/Loader';\r\nconst Swal = require('sweetalert2');\r\n\r\nconst Checkout = ({ refreshCartFn }) => {\r\n    const [client, setClient] = useState([]);\r\n    const [invoice, setInvoice] = useState([]);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const [paymentTerms, setPaymentTerms] = useState([]);\r\n    const [lastPaymentTerm, setLastPaymentTerm] = useState([]);\r\n    const [confirmScreen, setConfirmScreen] = useState(false);\r\n    const [inputs, setInputs] = useState({ idCondicaoPagamento: '' });\r\n    const [deliveryDate, setDeliveryDate] = useState('');\r\n    const [errors, setErrors] = useState([]);\r\n\r\n    const [ratingOldInvoice, setRatingOldInvoice] = useState(null);\r\n    const [rating, setRating] = useState(0);\r\n    const [ratingObs, setRatingObs] = useState(null);\r\n\r\n    // modal\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const showModal = () => {\r\n        setIsOpen(true);\r\n    };\r\n\r\n    const hideModal = () => {\r\n        setIsOpen(false);\r\n    };\r\n    // modal\r\n\r\n    const getDados = getItemSession('_dados');\r\n    const dados = JSON.parse(getDados);\r\n\r\n    const pedido = getItemSession('_pedido');\r\n\r\n    useEffect(() => {\r\n        fetchClient(dados.idCliente)\r\n            .then(result => {\r\n                setClient(result.data.Data.Dados[0])\r\n            });\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchCart(pedido)\r\n            .then(result => {\r\n                setInvoice(result.data.Data.Dados[0])\r\n                if (result.data.Data.Dados[0].NumeroItens === 0) {\r\n                    window.location.href = process.env.REACT_APP_BASE_URL\r\n                }\r\n\r\n                if (result.data.Data.Dados[0].idCondicaoPagamento > 0) {\r\n                    setInputs({\r\n                        ...inputs,\r\n                        ['idCondicaoPagamento']: result.data.Data.Dados[0].idCondicaoPagamento\r\n                    });\r\n                }\r\n\r\n                setRatingOldInvoice(pedido)\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchPaymentTerms()\r\n            .then(result => {\r\n                setPaymentTerms(result.data.Data.Dados)\r\n\r\n                const last = result.data.Data.Dados.filter(paymentTerm => paymentTerm.UltimaUtilizada === true)\r\n\r\n                setLastPaymentTerm(last[0])\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetchDeliveryDate()\r\n            .then(result => {\r\n                setDeliveryDate(result.data.Data.Dados[0])\r\n            })\r\n            /* Deixado somente 1 disconnect */\r\n            // .catch(reject => {\r\n            //     disconnect();\r\n            // })\r\n    }, [])\r\n\r\n    const handlePaymentTerm = (e) => {\r\n        e.preventDefault();\r\n\r\n        scrollToTop();\r\n\r\n        setLoading(true);\r\n\r\n        postEndCart()\r\n            .then(resultEndCart => {\r\n                if (resultEndCart.data.Codigo === 400 && resultEndCart.data.CodigoInterno === 18) {\r\n                    setErrors(resultEndCart.data.Data.Resultados);\r\n                    setLoading(false);\r\n                } else {                    \r\n                    setItemSession('_pedido', resultEndCart.data.Data.Pedido.ukPedido);\r\n\r\n                    const newStorage = {\r\n                        \"QuantidadeRegistrosTotal\": 0,\r\n                        \"QuantidadeRegistrosRetornados\": 0,\r\n                        \"Paginas\": 1,\r\n                        \"ResultadosPorPagina\": 0,\r\n                        \"Dados\": []\r\n                    }\r\n                    setItemSession('_carrinho', JSON.stringify(newStorage));\r\n                    refreshCartFn(newStorage);\r\n\r\n                    setLoading(false);\r\n                    setConfirmScreen(true);\r\n\r\n                    if (invoice.RealizarPesquisaSatisfacao) {\r\n                        showModal();\r\n                    }\r\n                }\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }\r\n\r\n    const onInputChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setInputs({\r\n            ...inputs,\r\n            [name]: value\r\n        });\r\n\r\n        postSelectedPaymentTerm(value);\r\n    };\r\n\r\n    const handleRate = ({ rating }) => {\r\n        setRating(rating)\r\n    }\r\n\r\n    const onTextareaRateChange = event => {\r\n        setRatingObs(event.target.value);\r\n    };\r\n\r\n    const handleSubmitRate = (e) => {\r\n        e.preventDefault();\r\n        postSurveyRate(ratingOldInvoice, rating, ratingObs)\r\n            .then(result => {\r\n                hideModal()\r\n            })\r\n            .catch(reject => {\r\n                disconnect();\r\n            })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <section className=\"container checkout\">\r\n                <h2 className=\"titulo h2\">Fechamento do Pedido</h2>\r\n                <div className=\"checkout--container\">\r\n                    {!isLoading ? (\r\n                        !confirmScreen &&\r\n                        <div className=\"checkout--wrapper\">\r\n                            {errors.length > 0 &&\r\n                                <div class=\"alert alert-danger\" role=\"alert\">\r\n                                    <h4 class=\"alert-heading\">Atenção, seu pedido não foi gerado!</h4>\r\n                                    <p>Verifique o(s) erro(s) listado(s) abaixo:</p>\r\n                                    <hr />\r\n                                    <ul>\r\n                                        {errors.map(error => (<li class=\"mb-0\">{error.Mensagem}</li>))}\r\n                                    </ul>\r\n                                    {createElement('a', { href: '/carrinho', className: 'link-texto' }, 'Voltar para o carrinho')}\r\n                                </div>\r\n                            }\r\n\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Faturamento</h4>\r\n                                <p className=\"checkout--texto\">Faturar para {client.RazaoSocial}</p>\r\n                            </div>\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Entrega</h4>\r\n                                <p className=\"checkout--texto\">Endereço de Entrega</p>\r\n                                <p className=\"checkout--texto mt-0 checkout--max_width\">{client.EnderecoCompleto}</p>\r\n                                <p className=\"checkout--texto titulo--bold\">Data de entrega prevista: {' '}\r\n                                    {!deliveryDate.DataEntrega\r\n                                        ? 'Em definição'\r\n                                        : formatDateToView(deliveryDate.DataEntrega)}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Pagamento</h4>\r\n                                <form action=\"\">\r\n                                    <fieldset className=\"form-group\">\r\n                                        <label className=\"checkout--label\" htmlFor=\"select-checkout\">Condição de pagamento</label>                                        \r\n                                            <select class=\"form-control\" onChange={onInputChange} required name=\"idCondicaoPagamento\" id=\"select-checkout\">\r\n                                                <option value=\"\">Escolha o número de parcelas</option>\r\n                                                {paymentTerms.map((paymentTerm, index) => (\r\n                                                    <option\r\n                                                        key={`payment-${index}`}\r\n                                                        value={paymentTerm.idCondicaoPagamento}\r\n                                                        selected={paymentTerm.idCondicaoPagamento === inputs.idCondicaoPagamento}\r\n                                                    >{paymentTerm.nParcelas}x ({paymentTerm.Descricao})</option>\r\n                                                ))}\r\n                                            </select>\r\n                                    </fieldset>\r\n                                </form>\r\n                                <p className=\"checkout--texto checkout--texto-icon\">\r\n                                    {lastPaymentTerm &&\r\n                                        <>\r\n                                            <img src=\"./img/icone-info.svg\" alt=\"\" />\r\n                                            <span>Última condição utilizada | <b>{lastPaymentTerm.Descricao}</b></span>\r\n                                        </>\r\n                                    }\r\n                                </p>\r\n                                <p className=\"checkout--texto\">Taxa de Juros: 0%</p>\r\n                                <p className=\"checkout--texto mt-2\">Encargos: R$ {invoice.ValorTotalImposto ? formatMoney(invoice.ValorTotalImposto, 2, ',', '.') : '0,00'}</p>\r\n                            </div>\r\n                            <div className=\"checkout--campo\">\r\n                                <h4 className=\"titulo h4\">Fechamento</h4>\r\n                                <div className=\"checkout--container_valor\">\r\n                                    <p className=\"checkout--texto_valor\">Valor Total <span className=\"checkout--valor\">R$ {formatMoney(invoice.Valor, 2, ',', '.')}</span></p>\r\n                                    {inputs.idCondicaoPagamento > 0\r\n                                        ? <button data-toggle=\"modal\" data-target=\"#modalCheckout\" className=\"btn btn--laranja\">Finalizar Pedido</button>\r\n                                        : <button onClick={() =>  alert(\"Selecione a Condição de Pagamento\")} className=\"btn btn--laranja\">Finalizar Pedido</button>\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    ) : (\r\n                            <Loader short=\"false\" />\r\n                        )}\r\n\r\n                    {confirmScreen &&\r\n                        <div className=\"checkout--sucesso\">\r\n                            <span className=\"icobutton\">\r\n                                <span className=\"icon icon-check\"></span>\r\n                            </span>\r\n\r\n                            <h2 className=\"titulo h2 text-center\">Seu pedido foi concluído <br /> com sucesso!</h2>\r\n\r\n                            {createElement('a', { href: '/pedidos', className: 'btn btn--lg btn--roxo btn--bold' }, 'Ver todos os seus pedidos')}\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <div className=\"text-center\">\r\n                    {createElement('a', { href: '/carrinho', className: 'link-texto' }, 'Voltar para o carrinho')}\r\n                </div>\r\n            </section>\r\n\r\n            {/* <!-- Modal --> */}\r\n            <Modal show={isOpen} className=\"modal modal-rate fade\">\r\n                <Modal.Body>\r\n                    <div className=\"text-center\">\r\n                        <form onSubmit={handleSubmitRate}>\r\n                            <h4>Qual o seu nível de satisfação com a experiência de compra?</h4>\r\n                            <Rater\r\n                                total={5}\r\n                                rating={rating}\r\n                                onRate={handleRate}\r\n                            />\r\n                            <br /><br />\r\n                            Para qualquer observação, preencha o campo abaixo <small>(opcional)</small>:\r\n                            <textarea onChange={onTextareaRateChange} required name=\"obs\" className=\"input textarea\" id=\"obs\" rows=\"3\"></textarea>\r\n                            <br />\r\n                            <button type=\"submit\" className=\"btn btn--laranja btn--full\">Enviar</button>\r\n                        </form>\r\n                    </div>\r\n                </Modal.Body>\r\n            </Modal>\r\n\r\n            <div className=\"modal modal-checkout fade\" id=\"modalCheckout\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"modalCheckout\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span className=\"icon icon-times\"></span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <h2 className=\"titulo h2 text-center\">Finalizar Pedido?</h2>\r\n                            <p>Deseja finalizar seu pedido de número - {invoice.NumeroPedido}?</p>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button onClick={handlePaymentTerm} name=\"btn-checkout\" data-dismiss=\"modal\" aria-label=\"Close\" className=\"btn btn--lg btn--laranja btn--bold\">Sim, Finalizar!</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </>\r\n    );\r\n}\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}