{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\victor.abrao\\\\Desktop\\\\source\\\\clientes-blue-cycle-ecommerce\\\\src\\\\components\\\\Product\\\\ProductCard.js\";\nimport React, { useState, createElement } from 'react'; // import { Link } from 'react-router-dom';\n\nimport { formatMoney, disconnect } from '../../utils';\nimport { addToCart, fetchCartItems, updateCart } from '../../services/cart-api';\nimport * as CartActions from '../../store/actions/cart';\nimport { connect } from 'react-redux';\nimport { setItemSession, getItemSession } from '../../utils';\n\nconst Swal = require('sweetalert2');\n\nconst ProductCard = ({\n  product,\n  origin,\n  refreshCartFn\n}) => {\n  const [quantity, setQuantity] = useState(0);\n  const [adding, setAdding] = useState(false);\n\n  const decrement = () => setQuantity(q => isNaN(q) || q < 2 ? 0 : q - 1);\n\n  const increment = () => setQuantity(q => q >= 0 ? q + 1 : 1);\n\n  const handleChange = e => {\n    if (parseInt(e.target.value) > 0) {\n      setQuantity(parseInt(e.target.value));\n    } else {\n      setQuantity();\n    }\n  };\n\n  const handleAddToCart = e => {\n    e.preventDefault();\n    const intQuantity = parseInt(quantity);\n\n    if (isNaN(intQuantity) || intQuantity < 1) {\n      alert(\"Insira uma quantidade válida para o produto!\");\n      return false;\n    }\n\n    setAdding(true);\n    buttonActionDisabled(e);\n    const get = getItemSession('_carrinho');\n    const cartItems = JSON.parse(get);\n    const item = cartItems.Dados.filter(item => {\n      return item.idProduto === product.idProduto;\n    });\n    let time = 2000;\n\n    if (item.length > 0) {\n      const newQuantity = intQuantity + parseInt(item[0].Quantidade);\n      updateCart(product.idProduto, item[0].Item, newQuantity).then(resultUpdate => {\n        if (resultUpdate.data.Codigo === 500) {\n          alert(resultUpdate.data.Status);\n          setAdding(false);\n          time = 0;\n          buttonActionEnabled(e);\n        } else {\n          fetchCartItems().then(result => {\n            if (result.data.Data.Dados.length > 0) {\n              setItemSession('_carrinho', JSON.stringify(result.data.Data));\n              refreshCartFn(result.data.Data);\n            }\n\n            buttonActionEnabled(e);\n            setAdding(false);\n          }).catch(reject => {\n            disconnect();\n            buttonActionEnabled(e);\n            setAdding(false);\n          });\n        }\n      }).catch(reject => {\n        disconnect();\n        buttonActionEnabled(e);\n      });\n    } else {\n      addToCart(product.idProduto, intQuantity, origin).then(resultAdd => {\n        if (resultAdd.data.Codigo === 500) {\n          if (resultAdd.data.CodigoInterno == 4) {\n            disconnect();\n          } else {\n            alert(resultAdd.data.Status);\n            setAdding(false);\n            time = 0;\n          }\n\n          buttonActionEnabled(e);\n        } else {\n          fetchCartItems().then(result => {\n            if (result.data.Data.Dados.length > 0) {\n              setItemSession('_carrinho', JSON.stringify(result.data.Data));\n              refreshCartFn(result.data.Data);\n            }\n          }).then(result => {\n            buttonActionEnabled(e);\n            setAdding(false);\n          }).catch(reject => {\n            disconnect();\n            buttonActionEnabled(e);\n            setAdding(false);\n          });\n        }\n      }).catch(reject => {\n        disconnect();\n        buttonActionEnabled(e);\n      });\n    }\n  };\n\n  const buttonActionDisabled = e => {\n    e.persist();\n    e.target.disabled = true;\n  };\n\n  const buttonActionEnabled = e => {\n    e.persist();\n    e.target.disabled = false;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-item--header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, product.Lancamento === true && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"tag--card-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 49\n    }\n  }, \"Novidade\"), createElement('a', {\n    href: `/produto/${product.idProduto}`,\n    className: 'link-item'\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.LinkImagemLista,\n    alt: \"\",\n    className: \"img-card-produto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 104\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-item--body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-item--titulo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, createElement('a', {\n    href: `/produto/${product.idProduto}`\n  }, product.Descricao)), product.PossuiPrecoPromocional ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-item--valor--de\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"strike\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 65\n    }\n  }, \"R$ \", formatMoney(product.PrecoUnitario, 2, ',', '.')), \" \", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 135\n    }\n  }, \"unidade\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-item--valor--por\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, \"R$ \", formatMoney(product.PrecoPromocionalUnitario, 2, ',', '.'), \" \", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 130\n    }\n  }, \"unidade\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-item--valor-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 67\n    }\n  }, \"Total: de \", /*#__PURE__*/React.createElement(\"strike\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 80\n    }\n  }, \"R$ \", formatMoney(product.Preco, 2, ',', '.')), \" por R$ \", formatMoney(product.PrecoPromocional, 2, ',', '.')))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-item--valor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, \"R$ \", formatMoney(product.PrecoUnitario, 2, ',', '.'), \" \", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 114\n    }\n  }, \"unidade\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-item--valor-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 67\n    }\n  }, \"Total R$ \", formatMoney(product.Preco, 2, ',', '.')))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-item--estoque\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, product.Estoque > 0 ? `${product.Estoque} disponíveis` : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-black-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 109\n    }\n  }, \"Produto indispon\\xEDvel\"))), product.Estoque > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-item--footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-adicionar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    name: \"btn-item\",\n    className: \"btn form-adicionar--btn\",\n    onClick: decrement,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 25\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"quantity\",\n    value: quantity,\n    className: \"card-item--counter\",\n    onChange: handleChange,\n    maxLength: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    name: \"btn-item\",\n    className: \"btn form-adicionar--btn\",\n    onClick: increment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, \"+\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleAddToCart,\n    className: `btn btn-add btn--roxo btn--bold ${adding && 'active'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }, adding ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border spinner-border-sm text-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 33\n    }\n  }), \" Adicionando\") : 'Adicionar')));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  refreshCartFn: data => dispatch(CartActions.refreshCart(data))\n});\n\nexport default connect('', mapDispatchToProps)(ProductCard);","map":{"version":3,"sources":["C:/Users/victor.abrao/Desktop/source/clientes-blue-cycle-ecommerce/src/components/Product/ProductCard.js"],"names":["React","useState","createElement","formatMoney","disconnect","addToCart","fetchCartItems","updateCart","CartActions","connect","setItemSession","getItemSession","Swal","require","ProductCard","product","origin","refreshCartFn","quantity","setQuantity","adding","setAdding","decrement","q","isNaN","increment","handleChange","e","parseInt","target","value","handleAddToCart","preventDefault","intQuantity","alert","buttonActionDisabled","get","cartItems","JSON","parse","item","Dados","filter","idProduto","time","length","newQuantity","Quantidade","Item","then","resultUpdate","data","Codigo","Status","buttonActionEnabled","result","Data","stringify","catch","reject","resultAdd","CodigoInterno","persist","disabled","Lancamento","href","className","LinkImagemLista","Descricao","PossuiPrecoPromocional","PrecoUnitario","PrecoPromocionalUnitario","Preco","PrecoPromocional","Estoque","mapDispatchToProps","dispatch","refreshCart"],"mappings":"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","sourcesContent":["import React, { useState, createElement } from 'react';\r\n// import { Link } from 'react-router-dom';\r\nimport { formatMoney, disconnect } from '../../utils';\r\nimport { addToCart, fetchCartItems, updateCart } from '../../services/cart-api';\r\nimport * as CartActions from '../../store/actions/cart'\r\nimport { connect } from 'react-redux';\r\nimport { setItemSession, getItemSession } from '../../utils';\r\nconst Swal = require('sweetalert2');\r\n\r\n\r\nconst ProductCard = ({ product, origin, refreshCartFn }) => {\r\n    const [quantity, setQuantity] = useState(0)\r\n    const [adding, setAdding] = useState(false)\r\n\r\n    const decrement = () => setQuantity(q => isNaN(q) || q < 2 ? 0 : q - 1);\r\n    const increment = () => setQuantity(q => q >= 0 ? q + 1 : 1);\r\n\r\n    const handleChange = (e) => {\r\n        if (parseInt(e.target.value) > 0) {\r\n            setQuantity(parseInt(e.target.value));\r\n        } else {\r\n            setQuantity();\r\n        }\r\n    }\r\n\r\n    const handleAddToCart = (e) => {\r\n        e.preventDefault();\r\n\r\n        const intQuantity = parseInt(quantity);\r\n\r\n        if (isNaN(intQuantity) || intQuantity < 1) {\r\n            alert(\"Insira uma quantidade válida para o produto!\");\r\n            return false;\r\n        }\r\n\r\n        setAdding(true);\r\n\r\n        buttonActionDisabled(e);\r\n\r\n        const get = getItemSession('_carrinho');\r\n        const cartItems = JSON.parse(get);\r\n\r\n        const item = cartItems.Dados.filter(item => { return item.idProduto === product.idProduto })\r\n\r\n        let time = 2000;\r\n\r\n        if (item.length > 0) {\r\n            const newQuantity = intQuantity + parseInt(item[0].Quantidade)\r\n\r\n            updateCart(product.idProduto, item[0].Item, newQuantity)\r\n                .then(resultUpdate => {\r\n                    if (resultUpdate.data.Codigo === 500) {\r\n                        alert(resultUpdate.data.Status);\r\n\t\t\t\t\t\tsetAdding(false);\r\n                        time = 0;\r\n\t\t\t\t\t\tbuttonActionEnabled(e);\r\n                    } else {\r\n                        fetchCartItems()\r\n                            .then(result => {\r\n                                if (result.data.Data.Dados.length > 0) {\r\n\r\n                                    setItemSession('_carrinho', JSON.stringify(result.data.Data))\r\n                                    refreshCartFn(result.data.Data)\r\n                                }\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n                            })\r\n                            .catch(reject => {\r\n                                disconnect();\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n                            })\r\n                    }\r\n                   \r\n                })\r\n                .catch(reject => {\r\n                    disconnect();\r\n\t\t\t\t\tbuttonActionEnabled(e);\r\n                })\r\n        } else {\r\n            addToCart(product.idProduto, intQuantity, origin)\r\n                .then(resultAdd => {\r\n                    if (resultAdd.data.Codigo === 500) {\r\n                        if (resultAdd.data.CodigoInterno == 4) {\r\n                            disconnect()\r\n                        } else {\r\n                            alert(resultAdd.data.Status);\r\n\t\t\t\t\t\t\tsetAdding(false);\r\n                            time = 0;\r\n                        }\r\n\t\t\t\t\t\tbuttonActionEnabled(e);\r\n                    } else {\r\n                        fetchCartItems()\r\n                            .then(result => {\r\n                                if (result.data.Data.Dados.length > 0) {\r\n                                    setItemSession('_carrinho', JSON.stringify(result.data.Data))\r\n                                    refreshCartFn(result.data.Data)\r\n                                }\r\n                            })\r\n\t\t\t\t\t\t\t.then(result => {\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n\t\t\t\t\t\t\t})\r\n                            .catch(reject => {\r\n                                disconnect();\r\n\t\t\t\t\t\t\t\tbuttonActionEnabled(e);\r\n\t\t\t\t\t\t\t\tsetAdding(false);\r\n                            })\r\n                    }\r\n                })\r\n                .catch(reject => {\r\n                    disconnect();\r\n\t\t\t\t\tbuttonActionEnabled(e);\r\n                })\r\n        }\r\n       \r\n    }\r\n\r\n    const buttonActionDisabled = (e) => {\r\n\t\te.persist();\r\n        e.target.disabled = true;\r\n    }\r\n    const buttonActionEnabled = (e) => {\r\n\t\te.persist();\r\n        e.target.disabled = false;\r\n    }\r\n\r\n    return (\r\n        <div className=\"card-item\">\r\n            <div className=\"card-item--header\">\r\n                {product.Lancamento === true && <span className=\"tag--card-item\">Novidade</span>}\r\n                {/* <img src={product.LinkImagemLista} alt=\"\" className=\"img-card-produto\" /> */}\r\n                {createElement('a', { href: `/produto/${product.idProduto}`, className: 'link-item' }, <img src={product.LinkImagemLista} alt=\"\" className=\"img-card-produto\" />)}\r\n            </div>\r\n            <div className=\"card-item--body\">\r\n                {/* <p className=\"card-item--codigo\">EAN: {product.EAN}</p> */}\r\n                <h5 className=\"card-item--titulo\">\r\n                    {/* <Link to={`/produto/${product.idProduto}`}>{product.Descricao}</Link> */}\r\n                    {createElement('a', { href: `/produto/${product.idProduto}` }, product.Descricao)}\r\n                </h5>\r\n                {product.PossuiPrecoPromocional\r\n                    ?\r\n                        <>\r\n                            <p className=\"card-item--valor--de\"><strike>R$ {formatMoney(product.PrecoUnitario, 2, ',', '.')}</strike> <small>unidade</small></p>\r\n                            <p className=\"card-item--valor--por\">R$ {formatMoney(product.PrecoPromocionalUnitario, 2, ',', '.')} <small>unidade</small></p>\r\n                            <p className=\"card-item--valor-total\"><b>Total: de <strike>R$ {formatMoney(product.Preco, 2, ',', '.')}</strike> por R$ {formatMoney(product.PrecoPromocional, 2, ',', '.')}</b></p>\r\n                        </>\r\n                    :\r\n                        <>\r\n                            <p className=\"card-item--valor\">R$ {formatMoney(product.PrecoUnitario, 2, ',', '.')} <small>unidade</small></p>\r\n                            <p className=\"card-item--valor-total\"><b>Total R$ {formatMoney(product.Preco, 2, ',', '.')}</b></p>\r\n                        </>\r\n                }\r\n                <p className=\"card-item--estoque\">{product.Estoque > 0 ? `${product.Estoque} disponíveis` : <span className=\"badge badge-black-white\">Produto indisponível</span>}</p>\r\n            </div>\r\n            {product.Estoque > 0 &&\r\n                <div className=\"card-item--footer\">\r\n                    <form className=\"form-adicionar\">\r\n                        <button\r\n                            type=\"button\"\r\n                            name=\"btn-item\"\r\n                            className=\"btn form-adicionar--btn\"\r\n                            onClick={decrement}>-</button>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"quantity\"\r\n                            value={quantity}\r\n                            className=\"card-item--counter\"\r\n                            onChange={handleChange}\r\n                            maxLength={4}\r\n\r\n                        />\r\n                        <button\r\n                            type=\"button\"\r\n                            name=\"btn-item\"\r\n                            className=\"btn form-adicionar--btn\"\r\n                            onClick={increment}>+</button>\r\n                    </form>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleAddToCart}\r\n                        className={`btn btn-add btn--roxo btn--bold ${adding && 'active'}`}\r\n                    >\r\n                        {adding\r\n                            ? <><div className=\"spinner-border spinner-border-sm text-light\"></div> Adicionando</>                            \r\n                            : 'Adicionar'\r\n                        }\r\n                        \r\n                    </button>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    refreshCartFn: (data) => dispatch(CartActions.refreshCart(data))\r\n})\r\n\r\nexport default connect('', mapDispatchToProps)(ProductCard);"]},"metadata":{},"sourceType":"module"}